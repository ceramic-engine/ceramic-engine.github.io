---
layout: page
---
<%
var guideMenus = [];
var allGuides = [];
for (item of collections.all) {
    if (item.data.category == 'guides' && item.url != '/guides/') {
        allGuides.push(item);
        var menu = item.data.menu;
        if (menu && guideMenus.indexOf(menu) == -1) {
            guideMenus.push(menu);
        }
    }
}
allGuides.sort(function(a, b) {
    if (a.order < b.order) {
        return -1;
    }
    else if (a.order > b.order) {
        return 1;
    }
    return 0;
});
%>
<div class="page-container">
    <div class="sidebar-left">
        <% if (page.url != '/guides/') { %>
        <aside class="sidebar">
            <ul>
            <% for (menu of guideMenus) { %>
                <li><%= menu %></li>
                <li>
                    <ul>
                        <%
                        for (item of allGuides) {
                            if (item.data.category == 'guides' && item.url != '/guides/' && item.data.menu == menu) {
                        %>
                            <li<%- item.url == page.url ? ' class="selected"' : '' %>>
                                <a href="<%= item.url %>"><%= item.data.title %></a>
                            </li>
                        <%
                            }
                        }
                        %>
                    </ul>
                </li>
            <% } %>
            </ul>
        </aside>
        <% } %>
    </div>
    <div class="content-right">
        <main>
            <%- content %>
            <% if (page.url != '/guides/') { %>
                <%
                var matchedCurrent = false;
                for (item of allGuides) {
                    if (matchedCurrent && item.data.menu == menu) {
                        %>
                        <h3>Next guide (<%= menu %>)</h3>
                        <p>&#10132; <a href="<%= item.url %>"><%= item.data.title %></a></p>
                        <%
                        break;
                    }
                    else if (item.url == page.url) {
                        matchedCurrent = true;
                    }
                }
                %>
            <% } %>
        </main>
    </div>
</div>
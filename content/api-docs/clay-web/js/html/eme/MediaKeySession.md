---
layout: api-docs
category: api-docs
subCategory: doc
menu: Haxe
title: MediaKeySession
target: Clay (Web)
permalink: api-docs/clay-web/js/html/eme/MediaKeySession/
---

# MediaKeySession

<div class="type-hierarchy"><a href="/api-docs/clay-web/js/html/EventTarget/">js.html.EventTarget</a> → <strong>js.html.eme.MediaKeySession</strong> (extern class)</div>

The `MediaKeySession` interface of the EncryptedMediaExtensions API represents a context for message exchange with a content decryption module (CDM).

Documentation [MediaKeySession](https://developer.mozilla.org/en-US/docs/Web/API/MediaKeySession) by [Mozilla Contributors](https://developer.mozilla.org/en-US/docs/Web/API/MediaKeySession$history), licensed under [CC-BY-SA 2.5](https://creativecommons.org/licenses/by-sa/2.5/).

<div class="see"><strong>See:</strong> <https://developer.mozilla.org/en-US/docs/Web/API/MediaKeySession></div>


## Instance Members

<div class="signature field-var no-description" id="error"><code><span class="field-name">error</span><span class="operator">:</span> <a href="/api-docs/clay-web/js/html/eme/MediaKeyError/" class="type-link">MediaKeyError</a></code><a class="header-anchor" href="#error"><span aria-hidden="true" class="header-anchor__symbol">#</span></a></div>

<hr class="field-separator" />

<div class="signature field-var has-description" id="sessionId"><code><span class="field-name">sessionId</span><span class="operator">:</span> <a href="/api-docs/clay-web/String/" class="type-link">String</a></code><a class="header-anchor" href="#sessionId"><span aria-hidden="true" class="header-anchor__symbol">#</span></a></div>

Contains a unique string generated by the CDM for the current media object and its associated keys or licenses.

<hr class="field-separator" />

<div class="signature field-var has-description" id="expiration"><code><span class="field-name">expiration</span><span class="operator">:</span> <a href="/api-docs/clay-web/Float/" class="type-link">Float</a></code><a class="header-anchor" href="#expiration"><span aria-hidden="true" class="header-anchor__symbol">#</span></a></div>

The time after which the keys in the current session can no longer be used to decrypt media data, or `NaN` if no such time exists. This value is determined by the CDM and measured in milliseconds since January 1, 1970, UTC. This value may change during a session lifetime, such as when an action triggers the start of a window.

<hr class="field-separator" />

<div class="signature field-var has-description" id="closed"><code><span class="field-name">closed</span><span class="operator">:</span> <a href="/api-docs/clay-web/js/lib/Promise/" class="type-link">js.lib.Promise</a><span class="operator">&lt;</span><a href="/api-docs/clay-web/Void/" class="type-link">Void</a><span class="operator">&gt;</span></code><a class="header-anchor" href="#closed"><span aria-hidden="true" class="header-anchor__symbol">#</span></a></div>

Returns a `Promise` signaling when a `MediaKeySession` closes. This promise can only be fulfilled and is never rejected. Closing a session means that licenses and keys associated with it are no longer valid for decrypting media data. 

<hr class="field-separator" />

<div class="signature field-var has-description" id="keyStatuses"><code><span class="field-name">keyStatuses</span><span class="operator">:</span> <a href="/api-docs/clay-web/js/html/eme/MediaKeyStatusMap/" class="type-link">MediaKeyStatusMap</a></code><a class="header-anchor" href="#keyStatuses"><span aria-hidden="true" class="header-anchor__symbol">#</span></a></div>

Contains a reference to a read-only `MediaKeyStatusMap` of the current session's keys and their statuses.

<hr class="field-separator" />

<div class="signature field-var has-description" id="onkeystatuseschange"><code><span class="field-name">onkeystatuseschange</span><span class="operator">:</span> <a href="/api-docs/clay-web/haxe/Function/" class="type-link">haxe.Function</a></code><a class="header-anchor" href="#onkeystatuseschange"><span aria-hidden="true" class="header-anchor__symbol">#</span></a></div>

Sets the `EventHandler` called when there has been a change in the keys in a session or their statuses.

<hr class="field-separator" />

<div class="signature field-var has-description" id="onmessage"><code><span class="field-name">onmessage</span><span class="operator">:</span> <a href="/api-docs/clay-web/haxe/Function/" class="type-link">haxe.Function</a></code><a class="header-anchor" href="#onmessage"><span aria-hidden="true" class="header-anchor__symbol">#</span></a></div>

Sets the `EventHandler` called when the content decryption module has generated a message for the session.

<hr class="field-separator" />

<div class="signature field-method has-description" id="generateRequest"><code><span class="field-name">generateRequest</span><span class="parenthesis">(</span><span class="arg-name">initDataType</span><span class="operator">:</span> <a href="/api-docs/clay-web/String/" class="type-link">String</a><span class="operator">,</span> <span class="arg-name">initData</span><span class="operator">:</span> <a href="/api-docs/clay-web/js/lib/ArrayBufferView/" class="type-link">js.lib.ArrayBufferView</a><span class="parenthesis">)</span><span class="operator">:</span> <a href="/api-docs/clay-web/js/lib/Promise/" class="type-link">js.lib.Promise</a><span class="operator">&lt;</span><a href="/api-docs/clay-web/Void/" class="type-link">Void</a><span class="operator">&gt;</span></code><a class="header-anchor" href="#generateRequest"><span aria-hidden="true" class="header-anchor__symbol">#</span></a></div>

Returns a `Promise` after generating a media request based on initialization data.

| Name | Type |
|------|------|
| `initDataType` | [String](/api-docs/clay-web/String/) |
| `initData` | [js.lib.ArrayBufferView](/api-docs/clay-web/js/lib/ArrayBufferView/) |

| Returns |
|---------|
| [js.lib.Promise](/api-docs/clay-web/js/lib/Promise/)<[Void](/api-docs/clay-web/Void/)> |

<hr class="field-separator" />

<div class="signature field-method has-description" id="load"><code><span class="field-name">load</span><span class="parenthesis">(</span><span class="arg-name">sessionId</span><span class="operator">:</span> <a href="/api-docs/clay-web/String/" class="type-link">String</a><span class="parenthesis">)</span><span class="operator">:</span> <a href="/api-docs/clay-web/js/lib/Promise/" class="type-link">js.lib.Promise</a><span class="operator">&lt;</span><a href="/api-docs/clay-web/Bool/" class="type-link">Bool</a><span class="operator">&gt;</span></code><a class="header-anchor" href="#load"><span aria-hidden="true" class="header-anchor__symbol">#</span></a></div>

Returns a `Promise` that resolves to a boolean value after loading data for a specified session object. 

| Name | Type |
|------|------|
| `sessionId` | [String](/api-docs/clay-web/String/) |

| Returns |
|---------|
| [js.lib.Promise](/api-docs/clay-web/js/lib/Promise/)<[Bool](/api-docs/clay-web/Bool/)> |

<hr class="field-separator" />

<div class="signature field-method has-description" id="update"><code><span class="field-name">update</span><span class="parenthesis">(</span><span class="arg-name">response</span><span class="operator">:</span> <a href="/api-docs/clay-web/js/lib/ArrayBufferView/" class="type-link">js.lib.ArrayBufferView</a><span class="parenthesis">)</span><span class="operator">:</span> <a href="/api-docs/clay-web/js/lib/Promise/" class="type-link">js.lib.Promise</a><span class="operator">&lt;</span><a href="/api-docs/clay-web/Void/" class="type-link">Void</a><span class="operator">&gt;</span></code><a class="header-anchor" href="#update"><span aria-hidden="true" class="header-anchor__symbol">#</span></a></div>

Returns a `Promise` after loading messages and licenses to the CDM.

| Name | Type |
|------|------|
| `response` | [js.lib.ArrayBufferView](/api-docs/clay-web/js/lib/ArrayBufferView/) |

| Returns |
|---------|
| [js.lib.Promise](/api-docs/clay-web/js/lib/Promise/)<[Void](/api-docs/clay-web/Void/)> |

<hr class="field-separator" />

<div class="signature field-method has-description" id="close"><code><span class="field-name">close</span><span class="parenthesis">(</span><span class="parenthesis">)</span><span class="operator">:</span> <a href="/api-docs/clay-web/js/lib/Promise/" class="type-link">js.lib.Promise</a><span class="operator">&lt;</span><a href="/api-docs/clay-web/Void/" class="type-link">Void</a><span class="operator">&gt;</span></code><a class="header-anchor" href="#close"><span aria-hidden="true" class="header-anchor__symbol">#</span></a></div>

Returns a `Promise` after notifying the current media session is no longer needed and that the CDM should release any resources associated with this object and close it.
| Returns |
|---------|
| [js.lib.Promise](/api-docs/clay-web/js/lib/Promise/)<[Void](/api-docs/clay-web/Void/)> |

<hr class="field-separator" />

<div class="signature field-method has-description" id="remove"><code><span class="field-name">remove</span><span class="parenthesis">(</span><span class="parenthesis">)</span><span class="operator">:</span> <a href="/api-docs/clay-web/js/lib/Promise/" class="type-link">js.lib.Promise</a><span class="operator">&lt;</span><a href="/api-docs/clay-web/Void/" class="type-link">Void</a><span class="operator">&gt;</span></code><a class="header-anchor" href="#remove"><span aria-hidden="true" class="header-anchor__symbol">#</span></a></div>

Returns a `Promise` after removing any session data associated with the current object.
| Returns |
|---------|
| [js.lib.Promise](/api-docs/clay-web/js/lib/Promise/)<[Void](/api-docs/clay-web/Void/)> |


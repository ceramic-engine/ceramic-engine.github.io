<!DOCTYPE html>
<html>
    <head>
        <script type="text/javascript">if (location.protocol !== 'https:' && location.hostname == 'ceramic-engine.com') location.replace('https:'+location.href.substring(location.protocol.length));</script>
        <meta charset="utf-8">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        <link rel="icon" href="/static/favicon.png"/>
        <link rel="apple-touch-icon" href="/static/touch-icon.png"/>
        <meta name="apple-mobile-web-app-capable" content="yes">
        <meta name="apple-mobile-web-app-status-bar-style" content="black">
        <title>DatabaseAsset - Ceramic</title>
        <link rel="stylesheet" href="/static/lucide-font/lucide.css" type="text/css" />
        <link rel="stylesheet" href="/static/style.css" type="text/css" />
        <link rel="stylesheet" href="/static/prism.css" type="text/css" />
        <script type="text/javascript" src="/static/script.js"></script>
        <meta property="og:site_name" content="Ceramic Engine" />
        <meta property="og:title" content="DatabaseAsset - Ceramic" />
        <meta property="og:description" content="A cross-platform &amp; open-source 2D framework" />
        <meta property="og:image" content="/static/img/ceramic-800-450.png" />
        <meta property="og:image:type" content="image/png" />
        <meta property="og:image:width" content="800" />
        <meta property="og:image:height" content="450" />
        
    </head>
    <body id="page-api-docs" class="page page-standard page-api-docs-doc">
        <aside id="site-navigation">
            <div class="nav-header">
                <a href="/" class="nav-logo"><img src="/static/ceramic-small.png" class="ceramic-icon" />Ceramic</a>
                <button class="hamburger" aria-label="Toggle menu">
                    <span></span>
                    <span></span>
                    <span></span>
                </button>
            </div>
            <ul class="nav-links">
                <li><a href="/"><img src="/static/ceramic-small.png" class="ceramic-icon" />Ceramic</a></li>
                <li><a href="/guides">Guides</a></li>
                <li><a href="/examples">Examples</a></li>
                <li><a href="/blog">Blog</a></li>
                <li class="selected"><a href="/api-docs/clay-native">API Docs</a></li>
                <li><a href="https://github.com/ceramic-engine/ceramic">GitHub</a></li>
                <li><a href="/discord">Discord</a></li>
            </ul>
        </aside>
        <div class="page-container">
    <div class="sidebar-left"></div>
    <div class="content-right">
        <main>
            <h1>DatabaseAsset</h1>
<div class="view-source"><a href="https://github.com/ceramic-engine/ceramic/blob/master/runtime/src/ceramic/DatabaseAsset.hx">View source</a></div>
<div class="type-hierarchy"><a href="/api-docs/headless/ceramic/Entity/">Entity</a> → <a href="/api-docs/headless/ceramic/Asset/">Asset</a> → <strong>ceramic.DatabaseAsset</strong> (Class)</div>
<p>Asset for loading CSV database files.</p>
<p>DatabaseAsset loads CSV (Comma-Separated Values) files and parses them
into an array of dynamic objects, where each row becomes an object with
properties based on the CSV headers.</p>
<p>Features:</p>
<ul>
<li>Automatic CSV parsing with header detection</li>
<li>Support for both comma and semicolon separators</li>
<li>Quoted string handling with escape sequences</li>
<li>Hot-reload support for database files</li>
<li>Each row accessible as a dynamic object</li>
</ul>
<p>CSV Format:</p>
<ul>
<li>First row must contain column headers (field names)</li>
<li>Supports comma (,) or semicolon (;) as separators</li>
<li>String values can be quoted with double quotes</li>
<li>Use &quot;&quot; to escape quotes within quoted strings</li>
</ul>
<pre class="language-haxe"><code class="language-haxe"><span class="highlight-line"><span class="token comment">// Load a CSV database</span></span>
<span class="highlight-line"><span class="token keyword">var</span> dbAsset <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token function">DatabaseAsset</span><span class="token punctuation">(</span><span class="token string">'enemies'</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="highlight-line">dbAsset<span class="token punctuation">.</span>path <span class="token operator">=</span> <span class="token string">'data/enemies.csv'</span><span class="token punctuation">;</span></span>
<span class="highlight-line">dbAsset<span class="token punctuation">.</span><span class="token function">onComplete</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">,</span> success <span class="token operator">-></span> <span class="token punctuation">{</span></span>
<span class="highlight-line">    <span class="token keyword">if</span> <span class="token punctuation">(</span>success<span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="highlight-line">        <span class="token comment">// Access the parsed data</span></span>
<span class="highlight-line">        <span class="token keyword">for</span> <span class="token punctuation">(</span>row <span class="token keyword">in</span> dbAsset<span class="token punctuation">.</span>database<span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="highlight-line">            <span class="token function">trace</span><span class="token punctuation">(</span><span class="token string">'Enemy: <span class="token interpolation"><span class="token interpolation variable">$</span><span class="token punctuation">{</span>row<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token string">"name"</span><span class="token punctuation">)</span><span class="token punctuation">}</span></span> HP: <span class="token interpolation"><span class="token interpolation variable">$</span><span class="token punctuation">{</span>row<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token string">"hp"</span><span class="token punctuation">)</span><span class="token punctuation">}</span></span>'</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="highlight-line">        <span class="token punctuation">}</span></span>
<span class="highlight-line">        <span class="token comment">// Find specific entries</span></span>
<span class="highlight-line">        <span class="token keyword">var</span> boss <span class="token operator">=</span> dbAsset<span class="token punctuation">.</span>database<span class="token punctuation">.</span><span class="token function">find</span><span class="token punctuation">(</span>row <span class="token operator">-></span> row<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token string">"type"</span><span class="token punctuation">)</span> <span class="token operator">==</span> <span class="token string">"boss"</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="highlight-line">    <span class="token punctuation">}</span></span>
<span class="highlight-line"><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="highlight-line">assets<span class="token punctuation">.</span><span class="token function">addAsset</span><span class="token punctuation">(</span>dbAsset<span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="highlight-line">assets<span class="token punctuation">.</span><span class="token function">load</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span></code></pre>
<p>Example CSV content:</p>
<pre class="language-csv"><code class="language-csv"><span class="highlight-line"><span class="token value">name</span><span class="token punctuation">,</span><span class="token value">hp</span><span class="token punctuation">,</span><span class="token value">damage</span><span class="token punctuation">,</span><span class="token value">type</span></span>
<span class="highlight-line"><span class="token value">Goblin</span><span class="token punctuation">,</span><span class="token value">10</span><span class="token punctuation">,</span><span class="token value">5</span><span class="token punctuation">,</span><span class="token value">normal</span></span>
<span class="highlight-line"><span class="token value">Orc</span><span class="token punctuation">,</span><span class="token value">20</span><span class="token punctuation">,</span><span class="token value">10</span><span class="token punctuation">,</span><span class="token value">normal</span></span>
<span class="highlight-line"><span class="token value">"Dragon King"</span><span class="token punctuation">,</span><span class="token value">100</span><span class="token punctuation">,</span><span class="token value">50</span><span class="token punctuation">,</span><span class="token value">boss</span></span></code></pre>
<div class="see"><strong>See:</strong> <a href="/api-docs/headless/ceramic/Asset/">Asset</a>, <a href="/api-docs/headless/ceramic/Csv/">Csv</a></div>
<h2 id="instance-members" tabindex="-1">Instance Members <a class="header-anchor" href="#instance-members"><span aria-hidden="true" class="header-anchor__symbol">#</span></a></h2>
<div class="signature field-var has-description" id="database"><code><span class="field-name">database</span><span class="operator">:</span> <a href="/api-docs/headless/Array/" class="type-link">Array</a><span class="operator">&lt;</span><a href="/api-docs/headless/haxe/DynamicAccess/" class="type-link">haxe.DynamicAccess</a><span class="operator">&lt;</span><a href="/api-docs/headless/String/" class="type-link">String</a><span class="operator">&gt;</span><span class="operator">&gt;</span></code><a class="header-anchor" href="#database"><span aria-hidden="true" class="header-anchor__symbol">#</span></a></div>
<p>The parsed database as an array of dynamic objects.
Each object represents a row, with properties matching the CSV headers.
Will be null until the asset is successfully loaded.</p>
<p>Access values using the get() method:</p>
<pre class="language-haxe"><code class="language-haxe"><span class="highlight-line"><span class="token keyword">var</span> name <span class="token operator">=</span> row<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token string">"name"</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="highlight-line"><span class="token keyword">var</span> hp <span class="token operator">=</span> Std<span class="token punctuation">.</span><span class="token function">parseInt</span><span class="token punctuation">(</span>row<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token string">"hp"</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span></code></pre>
<hr class="field-separator" />
<div class="signature field-method no-description" id="invalidateDatabase"><code><span class="field-name">invalidateDatabase</span><span class="parenthesis">(</span><span class="parenthesis">)</span><span class="operator">:</span> <a href="/api-docs/headless/Void/" class="type-link">Void</a></code><a class="header-anchor" href="#invalidateDatabase"><span aria-hidden="true" class="header-anchor__symbol">#</span></a></div>
<hr class="field-separator" />
<div class="signature field-method has-description" id="load"><code><span class="field-name">load</span><span class="parenthesis">(</span><span class="parenthesis">)</span><span class="operator">:</span> <a href="/api-docs/headless/Void/" class="type-link">Void</a></code><a class="header-anchor" href="#load"><span aria-hidden="true" class="header-anchor__symbol">#</span></a></div>
<p>Loads the CSV database file from the specified path.</p>
<p>The file is loaded as text and then parsed using the CSV parser.
The parsing automatically detects whether comma or semicolon is used
as the separator based on the first line.</p>
<p>On success, the database property will contain the parsed data.
On failure (file not found or parse error), the asset status becomes BROKEN.</p>
<hr class="field-separator" />
<div class="signature field-method has-description" id="destroy"><code><span class="field-name">destroy</span><span class="parenthesis">(</span><span class="parenthesis">)</span><span class="operator">:</span> <a href="/api-docs/headless/Void/" class="type-link">Void</a></code><a class="header-anchor" href="#destroy"><span aria-hidden="true" class="header-anchor__symbol">#</span></a></div>
<p>Destroys the database asset and clears the loaded data from memory.</p>
<hr class="field-separator" />
<div class="signature field-method no-description" id="new"><code><span class="field-name">new</span><span class="parenthesis">(</span><span class="arg-name">name</span><span class="operator">:</span> <a href="/api-docs/headless/String/" class="type-link">String</a><span class="operator">,</span> <span class="operator">?</span><span class="arg-name">variant</span><span class="operator">:</span> <a href="/api-docs/headless/String/" class="type-link">String</a><span class="operator">,</span> <span class="operator">?</span><span class="arg-name">options</span><span class="operator">:</span> <a href="/api-docs/headless/Null/" class="type-link">Null</a><span class="operator">&lt;</span><a href="/api-docs/headless/ceramic/AssetOptions/" class="type-link">AssetOptions</a><span class="operator">&gt;</span><span class="parenthesis">)</span><span class="operator">:</span> <a href="/api-docs/headless/Void/" class="type-link">Void</a></code><a class="header-anchor" href="#new"><span aria-hidden="true" class="header-anchor__symbol">#</span></a></div>
<table>
<thead>
<tr>
<th>Name</th>
<th>Type</th>
<th>Default</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>name</code></td>
<td><a href="/api-docs/headless/String/">String</a></td>
<td></td>
</tr>
<tr>
<td><code>variant</code></td>
<td><a href="/api-docs/headless/String/">String</a></td>
<td><em>(optional)</em></td>
</tr>
<tr>
<td><code>options</code></td>
<td><a href="/api-docs/headless/Null/">Null</a>&lt;<a href="/api-docs/headless/ceramic/AssetOptions/">AssetOptions</a>&gt;</td>
<td><em>(optional)</em></td>
</tr>
</tbody>
</table>
<h2 id="private-members" tabindex="-1">Private Members <a class="header-anchor" href="#private-members"><span aria-hidden="true" class="header-anchor__symbol">#</span></a></h2>
<div class="signature field-var no-description" id="unobservedDatabase"><code><span class="field-name">unobservedDatabase</span><span class="operator">:</span> <a href="/api-docs/headless/Array/" class="type-link">Array</a><span class="operator">&lt;</span><a href="/api-docs/headless/haxe/DynamicAccess/" class="type-link">haxe.DynamicAccess</a><span class="operator">&lt;</span><a href="/api-docs/headless/String/" class="type-link">String</a><span class="operator">&gt;</span><span class="operator">&gt;</span></code><a class="header-anchor" href="#unobservedDatabase"><span aria-hidden="true" class="header-anchor__symbol">#</span></a></div>
<hr class="field-separator" />
<div class="signature field-method has-description" id="emitDatabaseChange"><code><span class="field-name">emitDatabaseChange</span><span class="parenthesis">(</span><span class="arg-name">current</span><span class="operator">:</span> <a href="/api-docs/headless/Array/" class="type-link">Array</a><span class="operator">&lt;</span><a href="/api-docs/headless/haxe/DynamicAccess/" class="type-link">haxe.DynamicAccess</a><span class="operator">&lt;</span><a href="/api-docs/headless/String/" class="type-link">String</a><span class="operator">&gt;</span><span class="operator">&gt;</span><span class="operator">,</span> <span class="arg-name">previous</span><span class="operator">:</span> <a href="/api-docs/headless/Array/" class="type-link">Array</a><span class="operator">&lt;</span><a href="/api-docs/headless/haxe/DynamicAccess/" class="type-link">haxe.DynamicAccess</a><span class="operator">&lt;</span><a href="/api-docs/headless/String/" class="type-link">String</a><span class="operator">&gt;</span><span class="operator">&gt;</span><span class="parenthesis">)</span><span class="operator">:</span> <a href="/api-docs/headless/Void/" class="type-link">Void</a></code><a class="header-anchor" href="#emitDatabaseChange"><span aria-hidden="true" class="header-anchor__symbol">#</span></a></div>
<p>Event when database field changes.</p>
<table>
<thead>
<tr>
<th>Name</th>
<th>Type</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>current</code></td>
<td><a href="/api-docs/headless/Array/">Array</a>&lt;<a href="/api-docs/headless/haxe/DynamicAccess/">haxe.DynamicAccess</a>&lt;<a href="/api-docs/headless/String/">String</a>&gt;&gt;</td>
</tr>
<tr>
<td><code>previous</code></td>
<td><a href="/api-docs/headless/Array/">Array</a>&lt;<a href="/api-docs/headless/haxe/DynamicAccess/">haxe.DynamicAccess</a>&lt;<a href="/api-docs/headless/String/">String</a>&gt;&gt;</td>
</tr>
</tbody>
</table>
<hr class="field-separator" />
<div class="signature field-method has-description" id="assetFilesDidChange"><code><span class="field-name">assetFilesDidChange</span><span class="parenthesis">(</span><span class="arg-name">newFiles</span><span class="operator">:</span> <a href="/api-docs/headless/ceramic/ReadOnlyMap/" class="type-link">ReadOnlyMap</a><span class="operator">&lt;</span><a href="/api-docs/headless/String/" class="type-link">String</a><span class="operator">,</span> <a href="/api-docs/headless/Float/" class="type-link">Float</a><span class="operator">&gt;</span><span class="operator">,</span> <span class="arg-name">previousFiles</span><span class="operator">:</span> <a href="/api-docs/headless/ceramic/ReadOnlyMap/" class="type-link">ReadOnlyMap</a><span class="operator">&lt;</span><a href="/api-docs/headless/String/" class="type-link">String</a><span class="operator">,</span> <a href="/api-docs/headless/Float/" class="type-link">Float</a><span class="operator">&gt;</span><span class="parenthesis">)</span><span class="operator">:</span> <a href="/api-docs/headless/Void/" class="type-link">Void</a></code><a class="header-anchor" href="#assetFilesDidChange"><span aria-hidden="true" class="header-anchor__symbol">#</span></a></div>
<p>Called when asset files change on disk (hot-reload support).
Automatically reloads the database if its CSV file has been modified.</p>
<table>
<thead>
<tr>
<th>Name</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>newFiles</code></td>
<td><a href="/api-docs/headless/ceramic/ReadOnlyMap/">ReadOnlyMap</a>&lt;<a href="/api-docs/headless/String/">String</a>, <a href="/api-docs/headless/Float/">Float</a>&gt;</td>
<td>Map of current files and their modification times</td>
</tr>
<tr>
<td><code>previousFiles</code></td>
<td><a href="/api-docs/headless/ceramic/ReadOnlyMap/">ReadOnlyMap</a>&lt;<a href="/api-docs/headless/String/">String</a>, <a href="/api-docs/headless/Float/">Float</a>&gt;</td>
<td>Map of previous files and their modification times</td>
</tr>
</tbody>
</table>
<h2 id="metadata" tabindex="-1">Metadata <a class="header-anchor" href="#metadata"><span aria-hidden="true" class="header-anchor__symbol">#</span></a></h2>
<table>
<thead>
<tr>
<th>Name</th>
<th>Parameters</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>:build</code></td>
<td>tracker.macros.EventsMacro.build()</td>
</tr>
<tr>
<td><code>:autoBuild</code></td>
<td>tracker.macros.EventsMacro.build()</td>
</tr>
<tr>
<td><code>:build</code></td>
<td>ceramic.macros.EntityMacro.buildForCompletion()</td>
</tr>
<tr>
<td><code>:autoBuild</code></td>
<td>ceramic.macros.EntityMacro.buildForCompletion()</td>
</tr>
<tr>
<td><code>:build</code></td>
<td>tracker.macros.ObservableMacro.build()</td>
</tr>
<tr>
<td><code>:autoBuild</code></td>
<td>tracker.macros.ObservableMacro.build()</td>
</tr>
</tbody>
</table>

        </main>
    </div>
</div>
    </body>
</html>
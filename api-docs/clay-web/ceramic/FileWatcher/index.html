<!DOCTYPE html>
<html>
    <head>
        <script type="text/javascript">if (location.protocol !== 'https:' && location.hostname == 'ceramic-engine.com') location.replace('https:'+location.href.substring(location.protocol.length));</script>
        <meta charset="utf-8">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        <link rel="icon" href="/static/favicon.png"/>
        <link rel="apple-touch-icon" href="/static/touch-icon.png"/>
        <meta name="apple-mobile-web-app-capable" content="yes">
        <meta name="apple-mobile-web-app-status-bar-style" content="black">
        <title>FileWatcher - Ceramic</title>
        <link rel="stylesheet" href="/static/lucide-font/lucide.css" type="text/css" />
        <link rel="stylesheet" href="/static/style.css" type="text/css" />
        <link rel="stylesheet" href="/static/prism.css" type="text/css" />
        <script type="text/javascript" src="/static/script.js"></script>
        <meta property="og:site_name" content="Ceramic Engine" />
        <meta property="og:title" content="FileWatcher - Ceramic" />
        <meta property="og:description" content="A cross-platform &amp; open-source 2D framework" />
        <meta property="og:image" content="/static/img/ceramic-800-450.png" />
        <meta property="og:image:type" content="image/png" />
        <meta property="og:image:width" content="800" />
        <meta property="og:image:height" content="450" />
        
    </head>
    <body id="page-api-docs" class="page page-standard page-api-docs-doc">
        <aside id="site-navigation">
            <div class="nav-header">
                <a href="/" class="nav-logo"><img src="/static/ceramic-small.png" class="ceramic-icon" />Ceramic</a>
                <button class="hamburger" aria-label="Toggle menu">
                    <span></span>
                    <span></span>
                    <span></span>
                </button>
            </div>
            <ul class="nav-links">
                <li><a href="/"><img src="/static/ceramic-small.png" class="ceramic-icon" />Ceramic</a></li>
                <li><a href="/guides">Guides</a></li>
                <li><a href="/examples">Examples</a></li>
                <li><a href="/blog">Blog</a></li>
                <li class="selected"><a href="/api-docs/clay-native">API Docs</a></li>
                <li><a href="https://github.com/ceramic-engine/ceramic">GitHub</a></li>
                <li><a href="/discord">Discord</a></li>
            </ul>
        </aside>
        <div class="page-container">
    <div class="sidebar-left"></div>
    <div class="content-right">
        <main>
            <h1>FileWatcher</h1>
<div class="view-source"><a href="https://github.com/ceramic-engine/ceramic/blob/master/runtime/src/ceramic/FileWatcher.hx">View source</a></div>
<div class="type-hierarchy"><a href="/api-docs/clay-web/ceramic/Entity/">Entity</a> â†’ <strong>ceramic.FileWatcher</strong> (Class)</div>
<p>Cross-platform file monitoring system for hot-reloading and file change detection.</p>
<p>FileWatcher provides a unified API for monitoring file changes across different platforms
including native (sys), Node.js, and Electron environments. It periodically checks for
file modifications and notifies registered callbacks when changes are detected.</p>
<p>The watcher can operate in two modes:</p>
<ul>
<li>Content checking mode (default): Compares actual file content to detect changes</li>
<li>Timestamp mode: Only checks modification time (faster but less reliable)</li>
</ul>
<p>This implementation is compatible with the interpret.Watcher interface, allowing it
to be used with scripting and hot-reload systems.</p>
<p>Example:</p>
<pre class="language-haxe"><code class="language-haxe"><span class="highlight-line"><span class="token keyword">var</span> watcher <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token function">FileWatcher</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="highlight-line"><span class="token keyword">var</span> stopWatching <span class="token operator">=</span> watcher<span class="token punctuation">.</span><span class="token function">watch</span><span class="token punctuation">(</span><span class="token string">"config.json"</span><span class="token punctuation">,</span> <span class="token keyword">function</span><span class="token punctuation">(</span>content<span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="highlight-line">    <span class="token function">trace</span><span class="token punctuation">(</span><span class="token string">"Config file changed: "</span> <span class="token operator">+</span> content<span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="highlight-line"><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="highlight-line"></span>
<span class="highlight-line"><span class="token comment">// Later, to stop watching:</span></span>
<span class="highlight-line"><span class="token function">stopWatching</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span></code></pre>
<div class="see"><strong>See:</strong> <a href="/api-docs/clay-web/ceramic/Entity/">Entity</a></div>
<h2 id="static-members" tabindex="-1">Static Members <a class="header-anchor" href="#static-members"><span aria-hidden="true" class="header-anchor__symbol">#</span></a></h2>
<div class="signature field-var has-description" id="UPDATE_INTERVAL"><code><span class="field-name">UPDATE_INTERVAL</span><span class="operator">:</span> <a href="/api-docs/clay-web/Float/" class="type-link">Float</a></code><a class="header-anchor" href="#UPDATE_INTERVAL"><span aria-hidden="true" class="header-anchor__symbol">#</span></a></div>
<p>The interval in seconds between file checks.
Lower values provide faster detection but use more CPU.
Default: 1.0 second</p>
<h2 id="instance-members" tabindex="-1">Instance Members <a class="header-anchor" href="#instance-members"><span aria-hidden="true" class="header-anchor__symbol">#</span></a></h2>
<div class="signature field-method has-description" id="canWatch"><code><span class="field-name">canWatch</span><span class="parenthesis">(</span><span class="parenthesis">)</span><span class="operator">:</span> <a href="/api-docs/clay-web/Bool/" class="type-link">Bool</a></code><a class="header-anchor" href="#canWatch"><span aria-hidden="true" class="header-anchor__symbol">#</span></a></div>
<p>Checks if file watching is supported on the current platform.</p>
<table>
<thead>
<tr>
<th>Returns</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td><a href="/api-docs/clay-web/Bool/">Bool</a></td>
<td>True if the platform supports file watching, false otherwise</td>
</tr>
</tbody>
</table>
<hr class="field-separator" />
<div class="signature field-method has-description" id="watch"><code><span class="field-name">watch</span><span class="parenthesis">(</span><span class="arg-name">path</span><span class="operator">:</span> <a href="/api-docs/clay-web/String/" class="type-link">String</a><span class="operator">,</span> <span class="arg-name">onUpdate</span><span class="operator">:</span> <span class="type-name">Function</span><span class="parenthesis">)</span><span class="operator">:</span> <span class="type-name">Function</span></code><a class="header-anchor" href="#watch"><span aria-hidden="true" class="header-anchor__symbol">#</span></a></div>
<p>Starts watching a file for changes.</p>
<p>Multiple callbacks can be registered for the same file. Each callback
receives the new file content when a change is detected.</p>
<p>Example:</p>
<pre class="language-haxe"><code class="language-haxe"><span class="highlight-line"><span class="token keyword">var</span> stop <span class="token operator">=</span> watcher<span class="token punctuation">.</span><span class="token function">watch</span><span class="token punctuation">(</span><span class="token string">"data.txt"</span><span class="token punctuation">,</span> <span class="token keyword">function</span><span class="token punctuation">(</span>content<span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="highlight-line">    <span class="token function">trace</span><span class="token punctuation">(</span><span class="token string">"File updated with content: "</span> <span class="token operator">+</span> content<span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="highlight-line"><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span></code></pre>
<table>
<thead>
<tr>
<th>Name</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>path</code></td>
<td><a href="/api-docs/clay-web/String/">String</a></td>
<td>The file path to watch</td>
</tr>
<tr>
<td><code>onUpdate</code></td>
<td>Function</td>
<td>Callback function that receives the new file content</td>
</tr>
</tbody>
</table>
<table>
<thead>
<tr>
<th>Returns</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td>Function</td>
<td>A function that stops watching when called</td>
</tr>
</tbody>
</table>
<hr class="field-separator" />
<div class="signature field-method no-description" id="destroy"><code><span class="field-name">destroy</span><span class="parenthesis">(</span><span class="parenthesis">)</span><span class="operator">:</span> <a href="/api-docs/clay-web/Void/" class="type-link">Void</a></code><a class="header-anchor" href="#destroy"><span aria-hidden="true" class="header-anchor__symbol">#</span></a></div>
<hr class="field-separator" />
<div class="signature field-method no-description" id="new"><code><span class="field-name">new</span><span class="parenthesis">(</span><span class="parenthesis">)</span><span class="operator">:</span> <a href="/api-docs/clay-web/Void/" class="type-link">Void</a></code><a class="header-anchor" href="#new"><span aria-hidden="true" class="header-anchor__symbol">#</span></a></div>
<h2 id="private-members" tabindex="-1">Private Members <a class="header-anchor" href="#private-members"><span aria-hidden="true" class="header-anchor__symbol">#</span></a></h2>
<div class="signature field-var no-description" id="testedElectronAvailability"><code><span class="field-name">testedElectronAvailability</span><span class="operator">:</span> <a href="/api-docs/clay-web/Bool/" class="type-link">Bool</a></code><a class="header-anchor" href="#testedElectronAvailability"><span aria-hidden="true" class="header-anchor__symbol">#</span></a></div>
<hr class="field-separator" />
<div class="signature field-var no-description" id="electron"><code><span class="field-name">electron</span><span class="operator">:</span> <a href="/api-docs/clay-web/Dynamic/" class="type-link">Dynamic</a></code><a class="header-anchor" href="#electron"><span aria-hidden="true" class="header-anchor__symbol">#</span></a></div>
<hr class="field-separator" />
<div class="signature field-var has-description" id="checkContent"><code><span class="field-name">checkContent</span><span class="operator">:</span> <a href="/api-docs/clay-web/Bool/" class="type-link">Bool</a></code><a class="header-anchor" href="#checkContent"><span aria-hidden="true" class="header-anchor__symbol">#</span></a></div>
<p>Whether to compare actual file content or just modification times.</p>
<p>When true (default), the watcher reads and compares file content to detect
changes, which is more reliable but slower. When false, only modification
timestamps are checked, which is faster but may miss some changes.</p>
<hr class="field-separator" />
<div class="signature field-var has-description" id="watched"><code><span class="field-name">watched</span><span class="operator">:</span> <a href="/api-docs/clay-web/Map/" class="type-link">Map</a></code><a class="header-anchor" href="#watched"><span aria-hidden="true" class="header-anchor__symbol">#</span></a></div>
<p>Map of file paths to their watched state information.</p>
<hr class="field-separator" />
<div class="signature field-var has-description" id="timeSinceLastCheck"><code><span class="field-name">timeSinceLastCheck</span><span class="operator">:</span> <a href="/api-docs/clay-web/Float/" class="type-link">Float</a></code><a class="header-anchor" href="#timeSinceLastCheck"><span aria-hidden="true" class="header-anchor__symbol">#</span></a></div>
<p>Accumulator for time since last file check.</p>
<hr class="field-separator" />
<div class="signature field-method has-description" id="tick"><code><span class="field-name">tick</span><span class="parenthesis">(</span><span class="arg-name">delta</span><span class="operator">:</span> <a href="/api-docs/clay-web/Float/" class="type-link">Float</a><span class="parenthesis">)</span><span class="operator">:</span> <a href="/api-docs/clay-web/Void/" class="type-link">Void</a></code><a class="header-anchor" href="#tick"><span aria-hidden="true" class="header-anchor__symbol">#</span></a></div>
<p>Update tick called by the app's update loop.
Checks all watched files for changes at the configured interval.</p>
<table>
<thead>
<tr>
<th>Name</th>
<th>Type</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>delta</code></td>
<td><a href="/api-docs/clay-web/Float/">Float</a></td>
</tr>
</tbody>
</table>
<hr class="field-separator" />
<div class="signature field-method has-description" id="isFile"><code><span class="field-name">isFile</span><span class="parenthesis">(</span><span class="arg-name">path</span><span class="operator">:</span> <a href="/api-docs/clay-web/String/" class="type-link">String</a><span class="parenthesis">)</span><span class="operator">:</span> <a href="/api-docs/clay-web/Bool/" class="type-link">Bool</a></code><a class="header-anchor" href="#isFile"><span aria-hidden="true" class="header-anchor__symbol">#</span></a></div>
<p>Checks if a path points to a regular file (not a directory).</p>
<table>
<thead>
<tr>
<th>Name</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>path</code></td>
<td><a href="/api-docs/clay-web/String/">String</a></td>
<td>The path to check</td>
</tr>
</tbody>
</table>
<table>
<thead>
<tr>
<th>Returns</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td><a href="/api-docs/clay-web/Bool/">Bool</a></td>
<td>True if the path is a file, false otherwise</td>
</tr>
</tbody>
</table>
<hr class="field-separator" />
<div class="signature field-method has-description" id="lastModified"><code><span class="field-name">lastModified</span><span class="parenthesis">(</span><span class="arg-name">path</span><span class="operator">:</span> <a href="/api-docs/clay-web/String/" class="type-link">String</a><span class="parenthesis">)</span><span class="operator">:</span> <a href="/api-docs/clay-web/Float/" class="type-link">Float</a></code><a class="header-anchor" href="#lastModified"><span aria-hidden="true" class="header-anchor__symbol">#</span></a></div>
<p>Gets the last modification time of a file.</p>
<table>
<thead>
<tr>
<th>Name</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>path</code></td>
<td><a href="/api-docs/clay-web/String/">String</a></td>
<td>The file path</td>
</tr>
</tbody>
</table>
<table>
<thead>
<tr>
<th>Returns</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td><a href="/api-docs/clay-web/Float/">Float</a></td>
<td>Modification time in milliseconds since epoch, or -1 if unavailable</td>
</tr>
</tbody>
</table>
<hr class="field-separator" />
<div class="signature field-method has-description" id="getContent"><code><span class="field-name">getContent</span><span class="parenthesis">(</span><span class="arg-name">path</span><span class="operator">:</span> <a href="/api-docs/clay-web/String/" class="type-link">String</a><span class="parenthesis">)</span><span class="operator">:</span> <a href="/api-docs/clay-web/String/" class="type-link">String</a></code><a class="header-anchor" href="#getContent"><span aria-hidden="true" class="header-anchor__symbol">#</span></a></div>
<p>Reads the content of a file as a string.</p>
<table>
<thead>
<tr>
<th>Name</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>path</code></td>
<td><a href="/api-docs/clay-web/String/">String</a></td>
<td>The file path</td>
</tr>
</tbody>
</table>
<table>
<thead>
<tr>
<th>Returns</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td><a href="/api-docs/clay-web/String/">String</a></td>
<td>The file content, or null if unavailable</td>
</tr>
</tbody>
</table>
<h2 id="metadata" tabindex="-1">Metadata <a class="header-anchor" href="#metadata"><span aria-hidden="true" class="header-anchor__symbol">#</span></a></h2>
<table>
<thead>
<tr>
<th>Name</th>
<th>Parameters</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>:build</code></td>
<td>ceramic.macros.EntityMacro.buildForCompletion()</td>
</tr>
<tr>
<td><code>:autoBuild</code></td>
<td>ceramic.macros.EntityMacro.buildForCompletion()</td>
</tr>
<tr>
<td><code>:build</code></td>
<td>tracker.macros.EventsMacro.build()</td>
</tr>
<tr>
<td><code>:autoBuild</code></td>
<td>tracker.macros.EventsMacro.build()</td>
</tr>
</tbody>
</table>

        </main>
    </div>
</div>
    </body>
</html>
<!DOCTYPE html>
<html>
    <head>
        <script type="text/javascript">if (location.protocol !== 'https:' && location.hostname == 'ceramic-engine.com') location.replace('https:'+location.href.substring(location.protocol.length));</script>
        <meta charset="utf-8">
        <link rel="icon" href="/static/favicon.png"/>
        <link rel="apple-touch-icon" href="/static/touch-icon.png"/>
        <meta name="apple-mobile-web-app-capable" content="yes">
        <meta name="apple-mobile-web-app-status-bar-style" content="black">
        <title>Filters - Ceramic</title>
        <link rel="stylesheet" href="/static/style.css" type="text/css" />
        <link rel="stylesheet" href="/static/prism.css" type="text/css" />
        <script type="text/javascript" src="/static/script.js"></script>
        <meta property="og:site_name" content="Ceramic Engine" />
        <meta property="og:title" content="Filters - Ceramic" />
        <meta property="og:description" content="A cross-platform &amp; open-source 2D framework" />
        <meta property="og:image" content="/static/img/filters-schema.png" />
        <meta property="og:image:type" content="image/png" />
        <meta property="og:image:width" content="1024" />
        <meta property="og:image:height" content="640" />
        
    </head>
    <body id="page-guides" class="page page-standard">
        <aside id="site-navigation">
            <ul>
                <li><a href="/"><img src="/static/ceramic-small.png" class="ceramic-icon" />Ceramic</a></li>
                <li class="selected"><a href="/guides">Guides</a></li>
                <li><a href="/examples">Examples</a></li>
                <li><a href="/blog">Blog</a></li>
                <li><a href="/api-docs">API Docs</a></li>
                <li><a href="https://github.com/ceramic-engine/ceramic">GitHub</a></li>
                <li><a href="/discord">Discord</a></li>
            </ul>
        </aside>
        
<div class="page-container">
    <div class="sidebar-left">
        
        <aside class="sidebar">
            <ul>
            
                
                <li class="menu-title">Introduction</li>
                <li class="">
                    <ul>
                        
                            <li>
                                <a href="/guides/discover-ceramic/">Discover Ceramic</a>
                            </li>
                        
                    </ul>
                </li>
            
                
                <li class="menu-title">Getting Started</li>
                <li class="">
                    <ul>
                        
                            <li>
                                <a href="/guides/install-ceramic/">Install Ceramic</a>
                            </li>
                        
                            <li>
                                <a href="/guides/your-first-project/">Your first Ceramic project</a>
                            </li>
                        
                            <li>
                                <a href="/guides/editing-your-project/">Editing your project</a>
                            </li>
                        
                            <li>
                                <a href="/guides/display-a-square/">Display a square</a>
                            </li>
                        
                            <li>
                                <a href="/guides/display-an-image/">Display an image</a>
                            </li>
                        
                            <li>
                                <a href="/guides/moving-visuals/">Moving visuals</a>
                            </li>
                        
                    </ul>
                </li>
            
                
                <li class="menu-title selected">Handbook</li>
                <li class="expanded">
                    <ul>
                        
                            <li>
                                <a href="/guides/entities/">Entities</a>
                            </li>
                        
                            <li>
                                <a href="/guides/events/">Events</a>
                            </li>
                        
                            <li>
                                <a href="/guides/visuals/">Visuals</a>
                            </li>
                        
                            <li>
                                <a href="/guides/components/">Components</a>
                            </li>
                        
                            <li>
                                <a href="/guides/text/">Text</a>
                            </li>
                        
                            <li>
                                <a href="/guides/audio/">Audio</a>
                            </li>
                        
                            <li>
                                <a href="/guides/assets/">Assets</a>
                            </li>
                        
                            <li>
                                <a href="/guides/scenes/">Scenes</a>
                            </li>
                        
                            <li class="selected">
                                <a href="/guides/filters/">Filters</a>
                            </li>
                        
                            <li>
                                <a href="/guides/state-machines/">State Machines</a>
                            </li>
                        
                            <li>
                                <a href="/guides/observables/">Observables</a>
                            </li>
                        
                            <li>
                                <a href="/guides/systems/">Systems</a>
                            </li>
                        
                    </ul>
                </li>
            
                
                <li class="menu-title">Appendices</li>
                <li class="">
                    <ul>
                        
                            <li>
                                <a href="/guides/inside-a-default-project/">Inside a default project</a>
                            </li>
                        
                            <li>
                                <a href="/guides/ceramic-via-git/">Ceramic via Git</a>
                            </li>
                        
                            <li>
                                <a href="/guides/platform-setup/">Platform Setup</a>
                            </li>
                        
                            <li>
                                <a href="/guides/ceramic-yml-reference/">Reference: ceramic.yml</a>
                            </li>
                        
                            <li>
                                <a href="/guides/defines/">Ceramic Defines</a>
                            </li>
                        
                    </ul>
                </li>
            
                
                <li class="menu-title">Extras</li>
                <li class="">
                    <ul>
                        
                            <li>
                                <a href="/guides/faq/">FAQ</a>
                            </li>
                        
                    </ul>
                </li>
            
            </ul>
        </aside>
        
    </div>
    <div class="content-right">
        <main>
            <h1>Filters</h1>
<p>A <code>Filter</code> object is a visual that renders its <code>content</code> onto a <code>RenderTexture</code> and displays the result. It can be useful for various use cases that we will cover in this guide.</p>
<h2 id="overview" tabindex="-1">Overview <a class="header-anchor" href="#overview"><span aria-hidden="true" class="header-anchor__symbol">#</span></a></h2>
<p>In a few steps, what a <code>Filter</code> does is:</p>
<ol>
<li>Render all the <code>visuals</code> inside its <code>content</code> onto a <strong>render texture</strong>.</li>
<li>Optionally apply a <code>shader</code> to the resulting <strong>render texture</strong>.</li>
<li>Display the <strong>final result</strong>.</li>
</ol>
<p>
<img src="/static/img/filters-schema.png" alt="Filters Schema" />
<div class="caption">A graphical overview of how a <code>Filter</code> works.</div>
</p>
<h2 id="filters-in-action" tabindex="-1">Filters in action <a class="header-anchor" href="#filters-in-action"><span aria-hidden="true" class="header-anchor__symbol">#</span></a></h2>
<p>You create <strong>filters</strong> like any other visual:</p>
<div class="codename">Create a 800x600 filter with two visuals inside</div>
<pre class="language-haxe"><code class="language-haxe"><span class="highlight-line"><span class="token comment">// Create a 800x600 filter</span></span>
<span class="highlight-line"><span class="token keyword">var</span> filter <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token function">Filter</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="highlight-line">filter<span class="token punctuation">.</span><span class="token function">size</span><span class="token punctuation">(</span><span class="token number">800</span><span class="token punctuation">,</span> <span class="token number">600</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="highlight-line"><span class="token function">add</span><span class="token punctuation">(</span>filter<span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="highlight-line"></span>
<span class="highlight-line"><span class="token comment">// Add some visuals inside its content</span></span>
<span class="highlight-line">filter<span class="token punctuation">.</span>content<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span>someVisual1<span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="highlight-line">filter<span class="token punctuation">.</span>content<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span>someVisual2<span class="token punctuation">)</span><span class="token punctuation">;</span></span></code></pre>
<p>In the example above, the two visuals <code>someVisual1</code> and <code>someVisual2</code> will be rendered onto the <strong>render texture</strong> managed internally by our <code>filter</code>.</p>
<p>Then the <code>filter</code> will display the result. Think of it as some container that draws/flattens everything it contains onto its render texture, then displays it!</p>
<p class="extra-info">Note that the visuals are added with <code>filter.content.add()</code> and not simply <code>filter.add()</code>. This is done on purpose: only visuals added inside the filter's <code>content</code> will be rendered onto the filter's render texture.</p>
<h3 id="applying-a-shader-optional" tabindex="-1">Applying a shader (optional) <a class="header-anchor" href="#applying-a-shader-optional"><span aria-hidden="true" class="header-anchor__symbol">#</span></a></h3>
<p>Now that we have a filter, we can optionally apply some effects to it using a <code>shader</code>. Let's assume we have loaded Ceramic's built-in <strong>gaussian blur</strong> shader asset. We can use it on the filter:</p>
<div class="codename">Adding a gaussian blur shader to the filter</div>
<pre class="language-haxe"><code class="language-haxe"><span class="highlight-line"><span class="token comment">// Configure our gaussian blur shader</span></span>
<span class="highlight-line"><span class="token keyword">var</span> blur <span class="token operator">=</span> assets<span class="token punctuation">.</span><span class="token function">shader</span><span class="token punctuation">(</span>Shaders<span class="token punctuation">.</span>GAUSSIAN_BLUR<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">clone</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="highlight-line">blur<span class="token punctuation">.</span><span class="token function">setVec2</span><span class="token punctuation">(</span><span class="token string">'resolution'</span><span class="token punctuation">,</span> filter<span class="token punctuation">.</span>width<span class="token punctuation">,</span> filter<span class="token punctuation">.</span>height<span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="highlight-line">blur<span class="token punctuation">.</span><span class="token function">setVec2</span><span class="token punctuation">(</span><span class="token string">'blurSize'</span><span class="token punctuation">,</span> <span class="token number">6.0</span><span class="token punctuation">,</span> <span class="token number">6.0</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="highlight-line"></span>
<span class="highlight-line"><span class="token comment">// Apply the shader on our filter</span></span>
<span class="highlight-line">filter<span class="token punctuation">.</span>shader <span class="token operator">=</span> blur<span class="token punctuation">;</span></span></code></pre>
<p>That's it! Your two visuals <code>someVisual1</code> and <code>someVisual2</code> should look blurred now!</p>
<p>This technique is showcased in the <a href="/examples/gaussian-blur">gaussian blur</a> example that you can try below:</p>
<iframe src="https://ceramic-engine.com/ceramic-samples/gaussian-blur" width="640" height="480" loading="lazy" frameborder="0"></iframe>
<h2 id="interactions" tabindex="-1">Interactions <a class="header-anchor" href="#interactions"><span aria-hidden="true" class="header-anchor__symbol">#</span></a></h2>
<p>It can be hard to keep track of interactions such as pointer events when some visuals are rendered onto render textures.</p>
<p>Thankfully, <strong>Ceramic</strong> got you covered! If a visual inside a filter's content does listen to, say, the <code>pointerDown</code> event, it will work through the filter as well, even if the filter is transformed, rotated, skewed...</p>
<p>See for yourself on the following example, try to move your mouse around, see the related visual get highlighted, and click to see it react to become red:</p>
<iframe src="https://ceramic-engine.com/ceramic-samples/pointer-in-filter" width="640" height="480" loading="lazy" frameborder="0"></iframe>
<h2 id="filter-on-the-scene-system" tabindex="-1">Filter on the Scene system <a class="header-anchor" href="#filter-on-the-scene-system"><span aria-hidden="true" class="header-anchor__symbol">#</span></a></h2>
<p><strong>Ceramic</strong> gives you a way to use a <code>Filter</code> on all root scenes. Pretty handy if you want to apply an effect screen-wide easily:</p>
<pre class="language-haxe"><code class="language-haxe"><span class="highlight-line"><span class="token comment">// Create a filter with the same size as screen</span></span>
<span class="highlight-line"><span class="token keyword">var</span> filter <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token function">Filter</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="highlight-line">filter<span class="token punctuation">.</span><span class="token function">bindToScreenSize</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="highlight-line"></span>
<span class="highlight-line"><span class="token comment">// Use it as filter for the scene system</span></span>
<span class="highlight-line">app<span class="token punctuation">.</span>scenes<span class="token punctuation">.</span>filter <span class="token operator">=</span> filter<span class="token punctuation">;</span></span></code></pre>
<p>When doing this, every root scene will be automatically put inside the <strong>filter</strong>'s <code>content</code>.</p>
<h2 id="use-cases" tabindex="-1">Use cases <a class="header-anchor" href="#use-cases"><span aria-hidden="true" class="header-anchor__symbol">#</span></a></h2>
<p>Filters are quite versatile as they can be used in various situations. Here are some.</p>
<h3 id="process-a-whole-group-of-visual-through-a-shader" tabindex="-1">Process a whole group of visual through a shader <a class="header-anchor" href="#process-a-whole-group-of-visual-through-a-shader"><span aria-hidden="true" class="header-anchor__symbol">#</span></a></h3>
<p>This is the example that has been demonstrated above. You add visuals inside a filter's <code>content</code>, then assign a <code>shader</code> to the <code>filter</code> and that's it!</p>
<h3 id="apply-blending-or-alpha-consistently" tabindex="-1">Apply blending or alpha consistently <a class="header-anchor" href="#apply-blending-or-alpha-consistently"><span aria-hidden="true" class="header-anchor__symbol">#</span></a></h3>
<p>Let's assume you have many visuals inside a common container and you want to make this container half transparent. Sounds easy right? You could simply set <code>alpha = 0.5</code> to every visual and be done with it.</p>
<p>Except that if your visuals are overlapping each others it won't look like the whole container is half transparent. Instead each visual's alpha will add up and the result will be quite messy with different degrees of opacity.</p>
<p>However, if you add all these visuals inside a <strong>filter</strong>'s <code>content</code>, and then set <code>filter.alpha = 0.5</code>. The alpha will be applied consistently!</p>
<p>
<img src="/static/img/with-or-without-filter.png" alt="Comparing alpha result when using or not using Filters" />
<div class="caption">Comparing alpha result when using or not using a <strong>filter</strong>.</div>
</p>
<p>The same technique also works when using blending such as <code>Blending.ADD</code>. Instead of setting <code>blending = ADD</code> to every visual, put all the visuals in a <strong>filter</strong>'s <code>content</code> and set <code>blend = ADD</code> to the filter directly.</p>
<h3 id="an-alternative-to-cropping-clipping" tabindex="-1">An alternative to cropping / clipping <a class="header-anchor" href="#an-alternative-to-cropping-clipping"><span aria-hidden="true" class="header-anchor__symbol">#</span></a></h3>
<p>You can clip a visual and its children to the bounds of another visual using regular clipping like in the following code:</p>
<div class="codename">Clipping with a visual</div>
<pre class="language-haxe"><code class="language-haxe"><span class="highlight-line"><span class="token comment">// Create a 400x400 quad</span></span>
<span class="highlight-line"><span class="token keyword">var</span> visual1 <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token function">Quad</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="highlight-line">visual1<span class="token punctuation">.</span><span class="token function">size</span><span class="token punctuation">(</span><span class="token number">400</span><span class="token punctuation">,</span> <span class="token number">400</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="highlight-line"><span class="token function">add</span><span class="token punctuation">(</span>visual1<span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="highlight-line"></span>
<span class="highlight-line"><span class="token comment">// Create another smaller quad</span></span>
<span class="highlight-line"><span class="token comment">// that we will use to clip the first visual</span></span>
<span class="highlight-line"><span class="token keyword">var</span> visual2 <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token function">Quad</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="highlight-line">visual2<span class="token punctuation">.</span><span class="token function">pos</span><span class="token punctuation">(</span><span class="token number">300</span><span class="token punctuation">,</span> <span class="token number">100</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="highlight-line">visual2<span class="token punctuation">.</span><span class="token function">size</span><span class="token punctuation">(</span><span class="token number">200</span><span class="token punctuation">,</span> <span class="token number">100</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="highlight-line"><span class="token function">add</span><span class="token punctuation">(</span>visual2<span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="highlight-line"></span>
<span class="highlight-line"><span class="token comment">// This visual is only used for</span></span>
<span class="highlight-line"><span class="token comment">// clipping so we make it transparent</span></span>
<span class="highlight-line">visual2<span class="token punctuation">.</span>transparent <span class="token operator">=</span> <span class="token boolean">true</span><span class="token punctuation">;</span></span>
<span class="highlight-line"></span>
<span class="highlight-line"><span class="token comment">// Assign the clipping visual</span></span>
<span class="highlight-line">visual1<span class="token punctuation">.</span>clip <span class="token operator">=</span> visual2<span class="token punctuation">;</span></span></code></pre>
<p>This is fine and works quite well, but that kind of clipping can be very expensive because it can easily break batching and increase the number of draw calls.</p>
<p>In some situations, it can be worth it to use a filter, instead of this clipping technique, to achieve the same result.</p>
<p>Indeed, everything inside a <strong>filter</strong>'s <code>content</code> is rendered onto a <strong>render texture</strong>, and that also means anything outside the bounds of the render texture will be discarded! Looks like what we want to do right?</p>
<p>Here is a code using a filter that should give the same visual result at the previous regular clipping example:</p>
<div class="codename">Clipping with a filter</div>
<pre class="language-haxe"><code class="language-haxe"><span class="highlight-line"><span class="token comment">// Create a 400x400 quad</span></span>
<span class="highlight-line"><span class="token keyword">var</span> visual1 <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token function">Quad</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="highlight-line">visual1<span class="token punctuation">.</span><span class="token function">size</span><span class="token punctuation">(</span><span class="token number">400</span><span class="token punctuation">,</span> <span class="token number">400</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="highlight-line"><span class="token function">add</span><span class="token punctuation">(</span>visual1<span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="highlight-line"></span>
<span class="highlight-line"><span class="token comment">// Create a filter to use as clipper</span></span>
<span class="highlight-line"><span class="token keyword">var</span> filter <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token function">Quad</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="highlight-line">filter<span class="token punctuation">.</span><span class="token function">pos</span><span class="token punctuation">(</span><span class="token number">300</span><span class="token punctuation">,</span> <span class="token number">100</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="highlight-line">filter<span class="token punctuation">.</span><span class="token function">size</span><span class="token punctuation">(</span><span class="token number">200</span><span class="token punctuation">,</span> <span class="token number">100</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="highlight-line"><span class="token function">add</span><span class="token punctuation">(</span>filter<span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="highlight-line"></span>
<span class="highlight-line"><span class="token comment">// Add the visual to filter's content so</span></span>
<span class="highlight-line"><span class="token comment">// that the visual looks clipped</span></span>
<span class="highlight-line">filter<span class="token punctuation">.</span>content<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span>visual1<span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="highlight-line"></span>
<span class="highlight-line"><span class="token comment">// Compensate the visual's position</span></span>
<span class="highlight-line"><span class="token comment">// to make it positioned the same</span></span>
<span class="highlight-line"><span class="token comment">// as our previous example</span></span>
<span class="highlight-line">visual1<span class="token punctuation">.</span><span class="token function">pos</span><span class="token punctuation">(</span><span class="token operator">-</span>filter<span class="token punctuation">.</span>x<span class="token punctuation">,</span> <span class="token operator">-</span>filter<span class="token punctuation">.</span>y<span class="token punctuation">)</span><span class="token punctuation">;</span></span></code></pre>
<p class="extra-info">Despite the need of allocating an additional <strong>render texture</strong> for it, using a <code>filter</code> for clipping to bounds can be more efficient than regular <code>clip&nbsp;=&nbsp;...</code> because Ceramic supports <strong>multi-texture batching</strong>. That means the renderer doesn't need additional draw calls to blend filter's render textures with other visuals using other textures, while using regular clipping may trigger a lot of draw calls in some situations, like when a lot of visuals are adjacent to each other with similar depths and clipped differently. As always, it mostly depends on the situation and proper <strong>code profiling and draw debugging</strong> (with <code>ceramic_debug_draw</code>) is your best friend here to help you take a decision!</p>
<h3 id="render-at-lower-resolution-to-improve-performances" tabindex="-1">Render at lower resolution to improve performances <a class="header-anchor" href="#render-at-lower-resolution-to-improve-performances"><span aria-hidden="true" class="header-anchor__symbol">#</span></a></h3>
<p>Another common use case is to render your app/game at a lower resolution to save precious GPU resources. Want your game to render at 800x450 on a 4K screen? Easy! Put everything inside a 800x450 <strong>filter</strong>'s <code>content</code> and upscale the filter to match your screen size!</p>
<p>If you want to do that on all your root scenes, it is even easier because the scene system will upscale the filter for you, here is an example:</p>
<div class="codename">Filter for all root scenes</div>
<pre class="language-haxe"><code class="language-haxe"><span class="highlight-line"><span class="token comment">// Create a 800x450 filter</span></span>
<span class="highlight-line"><span class="token keyword">var</span> filter <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token function">Filter</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="highlight-line">filter<span class="token punctuation">.</span><span class="token function">size</span><span class="token punctuation">(</span><span class="token number">800</span><span class="token punctuation">,</span> <span class="token number">450</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="highlight-line"></span>
<span class="highlight-line"><span class="token comment">// Use it as filter for the scene system</span></span>
<span class="highlight-line">app<span class="token punctuation">.</span>scenes<span class="token punctuation">.</span>filter <span class="token operator">=</span> filter<span class="token punctuation">;</span></span></code></pre>
<h3 id="thats-all-about-filters" tabindex="-1">That's all about filters <a class="header-anchor" href="#thats-all-about-filters"><span aria-hidden="true" class="header-anchor__symbol">#</span></a></h3>
<p>This should give you a good overview of what filters are useful for. <strong>Ceramic</strong> comes with some built-in filters, like the <code>PixelArt</code> filter used in several sample projects such as <a href="/examples/tilemap-pixelart/">Tilemap Pixel Art</a> or <a href="/examples/pixel-platformer/">Pixel Platformer</a>. Good idea to take a look!</p>

            
                
                        <hr />
                        <p>
                            Continue reading &#10132; <a href="/guides/state-machines/">State Machines</a>
                        </p>
                        
            
            
            <hr />
            <div id="like-counter"></div>
            <script src="https://utteranc.es/client.js"
                repo="ceramic-engine/ceramic-comments"
                issue-term="pathname"
                theme="github-dark"
                crossorigin="anonymous"
                async>
            </script>
            
        </main>
    </div>
</div>
    </body>
</html>
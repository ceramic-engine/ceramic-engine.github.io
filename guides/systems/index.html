<!DOCTYPE html>
<html>
    <head>
        <script type="text/javascript">if (location.protocol !== 'https:' && location.hostname == 'ceramic-engine.com') location.replace('https:'+location.href.substring(location.protocol.length));</script>
        <meta charset="utf-8">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        <link rel="icon" href="/static/favicon.png"/>
        <link rel="apple-touch-icon" href="/static/touch-icon.png"/>
        <meta name="apple-mobile-web-app-capable" content="yes">
        <meta name="apple-mobile-web-app-status-bar-style" content="black">
        <title>Systems - Ceramic</title>
        <link rel="stylesheet" href="/static/lucide-font/lucide.css" type="text/css" />
        <link rel="stylesheet" href="/static/style.css" type="text/css" />
        <link rel="stylesheet" href="/static/prism.css" type="text/css" />
        <script type="text/javascript" src="/static/script.js"></script>
        <meta property="og:site_name" content="Ceramic Engine" />
        <meta property="og:title" content="Systems - Ceramic" />
        <meta property="og:description" content="A cross-platform &amp; open-source 2D framework" />
        <meta property="og:image" content="/static/img/ceramic-800-450.png" />
        <meta property="og:image:type" content="image/png" />
        <meta property="og:image:width" content="800" />
        <meta property="og:image:height" content="450" />
        
    </head>
    <body id="page-guides" class="page page-standard">
        <aside id="site-navigation">
            <div class="nav-header">
                <a href="/" class="nav-logo"><img src="/static/ceramic-small.png" class="ceramic-icon" />Ceramic</a>
                <button class="hamburger" aria-label="Toggle menu">
                    <span></span>
                    <span></span>
                    <span></span>
                </button>
            </div>
            <ul class="nav-links">
                <li><a href="/"><img src="/static/ceramic-small.png" class="ceramic-icon" />Ceramic</a></li>
                <li class="selected"><a href="/guides">Guides</a></li>
                <li><a href="/examples">Examples</a></li>
                <li><a href="/blog">Blog</a></li>
                <li><a href="/api-docs/clay-native">API Docs</a></li>
                <li><a href="https://github.com/ceramic-engine/ceramic">GitHub</a></li>
                <li><a href="/discord">Discord</a></li>
            </ul>
        </aside>
        
<div class="page-container">
    <div class="sidebar-left">
        
        <aside class="sidebar">
            <ul>
            
                
                <li class="menu-title">Introduction</li>
                <li class="">
                    <ul>
                        
                            <li>
                                <a href="/guides/discover-ceramic/">Discover Ceramic</a>
                            </li>
                        
                    </ul>
                </li>
            
                
                <li class="menu-title">Getting Started</li>
                <li class="">
                    <ul>
                        
                            <li>
                                <a href="/guides/install-ceramic/">Install Ceramic</a>
                            </li>
                        
                            <li>
                                <a href="/guides/your-first-project/">Your first Ceramic project</a>
                            </li>
                        
                            <li>
                                <a href="/guides/editing-your-project/">Editing your project</a>
                            </li>
                        
                            <li>
                                <a href="/guides/display-a-square/">Display a square</a>
                            </li>
                        
                            <li>
                                <a href="/guides/display-an-image/">Display an image</a>
                            </li>
                        
                            <li>
                                <a href="/guides/moving-visuals/">Moving visuals</a>
                            </li>
                        
                    </ul>
                </li>
            
                
                <li class="menu-title selected">Handbook</li>
                <li class="expanded">
                    <ul>
                        
                            <li>
                                <a href="/guides/entities/">Entities</a>
                            </li>
                        
                            <li>
                                <a href="/guides/events/">Events</a>
                            </li>
                        
                            <li>
                                <a href="/guides/visuals/">Visuals</a>
                            </li>
                        
                            <li>
                                <a href="/guides/components/">Components</a>
                            </li>
                        
                            <li>
                                <a href="/guides/text/">Text</a>
                            </li>
                        
                            <li>
                                <a href="/guides/audio/">Audio</a>
                            </li>
                        
                            <li>
                                <a href="/guides/assets/">Assets</a>
                            </li>
                        
                            <li>
                                <a href="/guides/scenes/">Scenes</a>
                            </li>
                        
                            <li>
                                <a href="/guides/filters/">Filters</a>
                            </li>
                        
                            <li>
                                <a href="/guides/state-machines/">State Machines</a>
                            </li>
                        
                            <li>
                                <a href="/guides/observables/">Observables</a>
                            </li>
                        
                            <li class="selected">
                                <a href="/guides/systems/">Systems</a>
                            </li>
                        
                            <li>
                                <a href="/guides/sprites/">Sprites</a>
                            </li>
                        
                            <li>
                                <a href="/guides/input/">Input</a>
                            </li>
                        
                    </ul>
                </li>
            
                
                <li class="menu-title">Appendices</li>
                <li class="">
                    <ul>
                        
                            <li>
                                <a href="/guides/inside-a-default-project/">Inside a default project</a>
                            </li>
                        
                            <li>
                                <a href="/guides/ceramic-via-git/">Ceramic via Git</a>
                            </li>
                        
                            <li>
                                <a href="/guides/platform-setup/">Platform Setup</a>
                            </li>
                        
                            <li>
                                <a href="/guides/ceramic-yml-reference/">Reference: ceramic.yml</a>
                            </li>
                        
                            <li>
                                <a href="/guides/defines/">Ceramic Defines</a>
                            </li>
                        
                    </ul>
                </li>
            
                
                <li class="menu-title">Extras</li>
                <li class="">
                    <ul>
                        
                            <li>
                                <a href="/guides/faq/">FAQ</a>
                            </li>
                        
                    </ul>
                </li>
            
            </ul>
        </aside>
        
    </div>
    <div class="content-right">
        <main>
            <h1>Systems</h1>
<p>The <code>System</code> class is another way to structure your app. It can help you manage key mechanics and concepts of your app.</p>
<h2 id="basic-example" tabindex="-1">Basic example <a class="header-anchor" href="#basic-example"><span aria-hidden="true" class="header-anchor__symbol">#</span></a></h2>
<p>Here's an example of system not doing much, but giving you the basic structure:</p>
<div class="codename">An example of <code>System</code> subclass</div>
<pre class="language-haxe"><code class="language-haxe"><span class="highlight-line"><span class="token keyword">import</span> ceramic<span class="token punctuation">.</span>System<span class="token punctuation">;</span></span>
<span class="highlight-line"></span>
<span class="token comment">/**
<span class="highlight-line"> * Just an example of `System` subclass</span>
 */</span>
<span class="highlight-line"><span class="token keyword">class</span> MySystem <span class="token keyword">extends</span> System <span class="token punctuation">{</span></span>
<span class="highlight-line"></span>
    <span class="token comment">/**
<span class="highlight-line">     * A shared instance of `MySystem` so you can</span>
<span class="highlight-line">     * get the system with `MySystem.shared` from anywhere.</span>
     */</span>
<span class="highlight-line">    <span class="token metadata symbol">@lazy</span> <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">var</span> shared <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token function">MySystem</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="highlight-line"></span>
<span class="highlight-line">    <span class="token keyword">public</span> <span class="token keyword">function</span> <span class="token keyword">new</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="highlight-line">        <span class="token keyword">super</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="highlight-line"></span>
<span class="highlight-line">        <span class="token comment">// Values to tell when this system's</span></span>
<span class="highlight-line">        <span class="token comment">// `earlyUpdate()` and `lateUpdate()`</span></span>
<span class="highlight-line">        <span class="token comment">// methods will be called compared to</span></span>
<span class="highlight-line">        <span class="token comment">// other systems. Lower values make the</span></span>
<span class="highlight-line">        <span class="token comment">// methods run earlier than higher values.</span></span>
<span class="highlight-line">        earlyUpdateOrder <span class="token operator">=</span> <span class="token number">10000</span><span class="token punctuation">;</span></span>
<span class="highlight-line">        lateUpdateOrder <span class="token operator">=</span> <span class="token number">10000</span><span class="token punctuation">;</span></span>
<span class="highlight-line">    <span class="token punctuation">}</span></span>
<span class="highlight-line"></span>
<span class="highlight-line">    <span class="token keyword">override</span> <span class="token keyword">function</span> <span class="token function">earlyUpdate</span><span class="token punctuation">(</span>delta<span class="token punctuation">:</span>Float<span class="token punctuation">)</span><span class="token punctuation">:</span>Void <span class="token punctuation">{</span></span>
<span class="highlight-line">        <span class="token comment">// Do something at early update stage</span></span>
<span class="highlight-line">        <span class="token comment">// (called at each frame)</span></span>
<span class="highlight-line">    <span class="token punctuation">}</span></span>
<span class="highlight-line"></span>
<span class="highlight-line">    <span class="token keyword">override</span> <span class="token keyword">function</span> <span class="token function">lateUpdate</span><span class="token punctuation">(</span>delta<span class="token punctuation">:</span>Float<span class="token punctuation">)</span><span class="token punctuation">:</span>Void <span class="token punctuation">{</span></span>
<span class="highlight-line">        <span class="token comment">// Do something at late update stage</span></span>
<span class="highlight-line">        <span class="token comment">// (called at each frame)</span></span>
<span class="highlight-line">    <span class="token punctuation">}</span></span>
<span class="highlight-line"><span class="token punctuation">}</span></span></code></pre>
<p><code>System</code> classes are pretty simple: they are entity objects that have their <code>earlyUpdate()</code> and <code>lateUpdate()</code> methods called automatically by Ceramic, depending on the <code>earlyUpdateOrder</code> and <code>lateUpdateOrder</code> values.</p>
<p class="extra-info">The <code>@lazy</code> meta makes the field <em>lazy loaded</em>. The assigned value <code>new MySystem()</code> won't be evaluated until the first access of the field. That means the shared system instance will be created the first time we use something like: <code>var mySystem = MySystem.shared</code>.</p>
<h2 id="built-in-system-events" tabindex="-1">Built-in system events <a class="header-anchor" href="#built-in-system-events"><span aria-hidden="true" class="header-anchor__symbol">#</span></a></h2>
<p><code>System</code> classes have built-in events that allow to bind external code <em>right before</em> or <em>right after</em> <code>earlyUpdate()</code> and <code>lateUpdate()</code> calls:</p>
<div class="codename">Binding to system update events</div>
<pre class="language-haxe"><code class="language-haxe"><span class="highlight-line"><span class="token keyword">var</span> system <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token function">System</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="highlight-line"></span>
<span class="highlight-line"><span class="token comment">// Here we created a raw system instance,</span></span>
<span class="highlight-line"><span class="token comment">// but we could also do the following with</span></span>
<span class="highlight-line"><span class="token comment">// any other existing `System` subclass instance.</span></span>
<span class="highlight-line"><span class="token comment">// example: var system = MySystem.shared;</span></span>
<span class="highlight-line"></span>
<span class="highlight-line">system<span class="token punctuation">.</span>earlyUpdateOrder <span class="token operator">=</span> <span class="token number">12345</span><span class="token punctuation">;</span></span>
<span class="highlight-line">system<span class="token punctuation">.</span>lateUpdateOrder <span class="token operator">=</span> <span class="token number">12345</span><span class="token punctuation">;</span></span>
<span class="highlight-line"></span>
<span class="highlight-line">system<span class="token punctuation">.</span><span class="token function">onBeginEarlyUpdate</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">,</span> delta <span class="token operator">-></span> <span class="token punctuation">{</span></span>
<span class="highlight-line">    <span class="token function">trace</span><span class="token punctuation">(</span><span class="token string">'begin early update'</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="highlight-line"><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="highlight-line"></span>
<span class="highlight-line">system<span class="token punctuation">.</span><span class="token function">onEndEarlyUpdate</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">,</span> delta <span class="token operator">-></span> <span class="token punctuation">{</span></span>
<span class="highlight-line">    <span class="token function">trace</span><span class="token punctuation">(</span><span class="token string">'end early update'</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="highlight-line"><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="highlight-line"></span>
<span class="highlight-line">system<span class="token punctuation">.</span><span class="token function">onBeginLateUpdate</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">,</span> delta <span class="token operator">-></span> <span class="token punctuation">{</span></span>
<span class="highlight-line">    <span class="token function">trace</span><span class="token punctuation">(</span><span class="token string">'begin late update'</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="highlight-line"><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="highlight-line"></span>
<span class="highlight-line">system<span class="token punctuation">.</span><span class="token function">onEndLateUpdate</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">,</span> delta <span class="token operator">-></span> <span class="token punctuation">{</span></span>
<span class="highlight-line">    <span class="token function">trace</span><span class="token punctuation">(</span><span class="token string">'end late update'</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="highlight-line"><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span></code></pre>
<h2 id="when-and-how-to-use-systems" tabindex="-1">When and how to use systems? <a class="header-anchor" href="#when-and-how-to-use-systems"><span aria-hidden="true" class="header-anchor__symbol">#</span></a></h2>
<p>It is up to you how you'd want to use <strong>systems</strong> in your code. Here are some ideas:</p>
<ul>
<li>
<p>Centralize into <code>System</code> subclasses the main mechanics of your game, like <code>LevelSystem</code>, <code>ScoreSystem</code>, <code>LeaderboardSystem</code> etc...</p>
</li>
<li>
<p>When you need to update a large group of objects at each frame, using <code>System</code>'s <code>earlyUpdate()</code> or <code>lateUpdate()</code> methods is a good alternative to binding to <code>app.update</code> event on each of your objects. Plus it gives you more control to when your update logic is executed relative to other systems, thanks to <code>earlyUpdateOrder</code> and <code>lateUpdateOrder</code> values.</p>
</li>
<li>
<p>If you like <strong>ECS</strong>, you can architecture your code in the <strong>Entity-Component-System</strong> fashion, where most code logic is located in <code>System</code> classes, and most data in <code>Component</code> classes.</p>
</li>
</ul>
<p class="extra-info">
Ceramic is using <code>System</code> in various situations for its internals, you can take a look at some of these:
<br /><br />
• <a href="https://github.com/ceramic-engine/ceramic/blob/master/plugins/spine/runtime/src/ceramic/SpineSystem.hx">SpineSystem</a> used to manage <code>Spine</code> animation objects
<br />
• <a href="https://github.com/ceramic-engine/ceramic/blob/master/runtime/src/ceramic/StateMachineSystem.hx">StateMachineSystem</a> used to automatically run <code>StateMachine</code> objects
<br />
• <a href="https://github.com/ceramic-engine/ceramic/blob/master/plugins/arcade/runtime/src/ceramic/ArcadeSystem.hx">ArcadeSystem</a> used to update the arcade physics over time
</p>
            
                
                        <hr />
                        <p>
                            Continue reading &#10132; <a href="/guides/sprites/">Sprites</a>
                        </p>
                        
            
            
            <hr />
            <div id="like-counter"></div>
            <script src="https://utteranc.es/client.js"
                repo="ceramic-engine/ceramic-comments"
                issue-term="pathname"
                theme="github-dark"
                crossorigin="anonymous"
                async>
            </script>
            
        </main>
    </div>
</div>
    </body>
</html>
<!DOCTYPE html>
<html>
    <head>
        <script type="text/javascript">if (location.protocol !== 'https:' && location.hostname == 'ceramic-engine.com') location.replace('https:'+location.href.substring(location.protocol.length));</script>
        <meta charset="utf-8">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        <link rel="icon" href="/static/favicon.png"/>
        <link rel="apple-touch-icon" href="/static/touch-icon.png"/>
        <meta name="apple-mobile-web-app-capable" content="yes">
        <meta name="apple-mobile-web-app-status-bar-style" content="black">
        <title>Input - Ceramic</title>
        <link rel="stylesheet" href="/static/lucide-font/lucide.css" type="text/css" />
        <link rel="stylesheet" href="/static/style.css" type="text/css" />
        <link rel="stylesheet" href="/static/prism.css" type="text/css" />
        <script type="text/javascript" src="/static/script.js"></script>
        <meta property="og:site_name" content="Ceramic Engine" />
        <meta property="og:title" content="Input - Ceramic" />
        <meta property="og:description" content="A cross-platform &amp; open-source 2D framework" />
        <meta property="og:image" content="/static/img/ceramic-800-450.png" />
        <meta property="og:image:type" content="image/png" />
        <meta property="og:image:width" content="800" />
        <meta property="og:image:height" content="450" />
        
    </head>
    <body id="page-guides" class="page page-standard">
        <aside id="site-navigation">
            <div class="nav-header">
                <a href="/" class="nav-logo"><img src="/static/ceramic-small.png" class="ceramic-icon" />Ceramic</a>
                <button class="hamburger" aria-label="Toggle menu">
                    <span></span>
                    <span></span>
                    <span></span>
                </button>
            </div>
            <ul class="nav-links">
                <li><a href="/"><img src="/static/ceramic-small.png" class="ceramic-icon" />Ceramic</a></li>
                <li class="selected"><a href="/guides">Guides</a></li>
                <li><a href="/examples">Examples</a></li>
                <li><a href="/blog">Blog</a></li>
                <li><a href="/api-docs/clay-native">API Docs</a></li>
                <li><a href="https://github.com/ceramic-engine/ceramic">GitHub</a></li>
                <li><a href="/discord">Discord</a></li>
            </ul>
        </aside>
        
<div class="page-container">
    <div class="sidebar-left">
        
        <aside class="sidebar">
            <ul>
            
                
                <li class="menu-title">Introduction</li>
                <li class="">
                    <ul>
                        
                            <li>
                                <a href="/guides/discover-ceramic/">Discover Ceramic</a>
                            </li>
                        
                    </ul>
                </li>
            
                
                <li class="menu-title">Getting Started</li>
                <li class="">
                    <ul>
                        
                            <li>
                                <a href="/guides/install-ceramic/">Install Ceramic</a>
                            </li>
                        
                            <li>
                                <a href="/guides/your-first-project/">Your first Ceramic project</a>
                            </li>
                        
                            <li>
                                <a href="/guides/editing-your-project/">Editing your project</a>
                            </li>
                        
                            <li>
                                <a href="/guides/display-a-square/">Display a square</a>
                            </li>
                        
                            <li>
                                <a href="/guides/display-an-image/">Display an image</a>
                            </li>
                        
                            <li>
                                <a href="/guides/moving-visuals/">Moving visuals</a>
                            </li>
                        
                    </ul>
                </li>
            
                
                <li class="menu-title selected">Handbook</li>
                <li class="expanded">
                    <ul>
                        
                            <li>
                                <a href="/guides/entities/">Entities</a>
                            </li>
                        
                            <li>
                                <a href="/guides/events/">Events</a>
                            </li>
                        
                            <li>
                                <a href="/guides/visuals/">Visuals</a>
                            </li>
                        
                            <li>
                                <a href="/guides/components/">Components</a>
                            </li>
                        
                            <li>
                                <a href="/guides/text/">Text</a>
                            </li>
                        
                            <li>
                                <a href="/guides/audio/">Audio</a>
                            </li>
                        
                            <li>
                                <a href="/guides/assets/">Assets</a>
                            </li>
                        
                            <li>
                                <a href="/guides/scenes/">Scenes</a>
                            </li>
                        
                            <li>
                                <a href="/guides/filters/">Filters</a>
                            </li>
                        
                            <li>
                                <a href="/guides/state-machines/">State Machines</a>
                            </li>
                        
                            <li>
                                <a href="/guides/observables/">Observables</a>
                            </li>
                        
                            <li>
                                <a href="/guides/systems/">Systems</a>
                            </li>
                        
                            <li>
                                <a href="/guides/sprites/">Sprites</a>
                            </li>
                        
                            <li class="selected">
                                <a href="/guides/input/">Input</a>
                            </li>
                        
                    </ul>
                </li>
            
                
                <li class="menu-title">Appendices</li>
                <li class="">
                    <ul>
                        
                            <li>
                                <a href="/guides/inside-a-default-project/">Inside a default project</a>
                            </li>
                        
                            <li>
                                <a href="/guides/ceramic-via-git/">Ceramic via Git</a>
                            </li>
                        
                            <li>
                                <a href="/guides/platform-setup/">Platform Setup</a>
                            </li>
                        
                            <li>
                                <a href="/guides/ceramic-yml-reference/">Reference: ceramic.yml</a>
                            </li>
                        
                            <li>
                                <a href="/guides/defines/">Ceramic Defines</a>
                            </li>
                        
                    </ul>
                </li>
            
                
                <li class="menu-title">Extras</li>
                <li class="">
                    <ul>
                        
                            <li>
                                <a href="/guides/faq/">FAQ</a>
                            </li>
                        
                    </ul>
                </li>
            
            </ul>
        </aside>
        
    </div>
    <div class="content-right">
        <main>
            <h1>Input</h1>
<p>Ceramic provides a comprehensive input system to handle keyboard, mouse, touch, and gamepad interactions in your applications. The input system is unified and easy to use, with consistent patterns across different input types.</p>
<iframe class="ceramic-sample-iframe" onload="setTimeout(focusSampleIframe, 100);" src="https://ceramic-engine.com/ceramic-samples/keyboard-input/" width="640" height="480" loading="lazy" frameborder="0" style="height: 457.5px;"></iframe>
<div class="caption">An example of keyboard input handling</div>
<p>A summary:</p>
<ul>
<li>
<p>The <code>Input</code> class manages all keyboard and gamepad input through a singleton accessible via <code>input</code>.</p>
</li>
<li>
<p>Pointer input (mouse and touch) is handled through events on <code>Visual</code> objects and the <code>Screen</code>.</p>
</li>
<li>
<p>Input states are tracked automatically: just pressed, pressed (held), and just released.</p>
</li>
<li>
<p>Multi-touch and multiple gamepad support is built-in.</p>
</li>
<li>
<p>Input events integrate seamlessly with the entity/visual event system.</p>
</li>
</ul>
<h2 id="keyboard-input" tabindex="-1">Keyboard input <a class="header-anchor" href="#keyboard-input"><span aria-hidden="true" class="header-anchor__symbol">#</span></a></h2>
<p>Keyboard input in Ceramic is handled through the <code>Input</code> class. You can check key states or listen to key events.</p>
<h3 id="checking-key-states" tabindex="-1">Checking key states <a class="header-anchor" href="#checking-key-states"><span aria-hidden="true" class="header-anchor__symbol">#</span></a></h3>
<p>The input system tracks three states for each key:</p>
<div class="codename">Checking keyboard states</div>
<pre class="language-haxe"><code class="language-haxe"><span class="highlight-line"><span class="token comment">// Check if a key is currently held down</span></span>
<span class="highlight-line"><span class="token keyword">if</span> <span class="token punctuation">(</span>input<span class="token punctuation">.</span><span class="token function">keyPressed</span><span class="token punctuation">(</span>SPACE<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="highlight-line">    player<span class="token punctuation">.</span><span class="token function">jump</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="highlight-line"><span class="token punctuation">}</span></span>
<span class="highlight-line"></span>
<span class="highlight-line"><span class="token comment">// Check if a key was just pressed this frame</span></span>
<span class="highlight-line"><span class="token keyword">if</span> <span class="token punctuation">(</span>input<span class="token punctuation">.</span><span class="token function">keyJustPressed</span><span class="token punctuation">(</span>ENTER<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="highlight-line">    <span class="token function">startGame</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="highlight-line"><span class="token punctuation">}</span></span>
<span class="highlight-line"></span>
<span class="highlight-line"><span class="token comment">// Check if a key was just released this frame</span></span>
<span class="highlight-line"><span class="token keyword">if</span> <span class="token punctuation">(</span>input<span class="token punctuation">.</span><span class="token function">keyJustReleased</span><span class="token punctuation">(</span>ESCAPE<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="highlight-line">    <span class="token function">closeMenu</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="highlight-line"><span class="token punctuation">}</span></span></code></pre>
<h3 id="listening-to-keyboard-events" tabindex="-1">Listening to keyboard events <a class="header-anchor" href="#listening-to-keyboard-events"><span aria-hidden="true" class="header-anchor__symbol">#</span></a></h3>
<p>You can also listen to keyboard events for more reactive input handling:</p>
<div class="codename">Keyboard event handling</div>
<pre class="language-haxe"><code class="language-haxe"><span class="highlight-line"><span class="token keyword">import</span> ceramic<span class="token punctuation">.</span>Key<span class="token punctuation">;</span></span>
<span class="highlight-line"><span class="token keyword">import</span> ceramic<span class="token punctuation">.</span>KeyCode<span class="token punctuation">;</span></span>
<span class="highlight-line"><span class="token keyword">import</span> ceramic<span class="token punctuation">.</span>Scene<span class="token punctuation">;</span></span>
<span class="highlight-line"></span>
<span class="highlight-line"><span class="token keyword">class</span> KeyboardScene <span class="token keyword">extends</span> Scene <span class="token punctuation">{</span></span>
<span class="highlight-line"></span>
<span class="highlight-line">    <span class="token keyword">override</span> <span class="token keyword">function</span> <span class="token function">create</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="highlight-line"></span>
<span class="highlight-line">        <span class="token comment">// Listen for key press events</span></span>
<span class="highlight-line">        input<span class="token punctuation">.</span><span class="token function">onKeyDown</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">,</span> keyDown<span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="highlight-line">        input<span class="token punctuation">.</span><span class="token function">onKeyUp</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">,</span> keyUp<span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="highlight-line"></span>
<span class="highlight-line">    <span class="token punctuation">}</span></span>
<span class="highlight-line"></span>
<span class="highlight-line">    <span class="token keyword">function</span> <span class="token function">keyDown</span><span class="token punctuation">(</span>key<span class="token punctuation">:</span>Key<span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="highlight-line">        <span class="token function">trace</span><span class="token punctuation">(</span><span class="token string">'Key pressed: '</span> <span class="token operator">+</span> KeyCode<span class="token punctuation">.</span><span class="token function">name</span><span class="token punctuation">(</span>key<span class="token punctuation">.</span>keyCode<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="highlight-line"></span>
<span class="highlight-line">        <span class="token comment">// React to specific keys</span></span>
<span class="highlight-line">        <span class="token keyword">switch</span> <span class="token punctuation">(</span>key<span class="token punctuation">.</span>keyCode<span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="highlight-line">            <span class="token keyword">case</span> LEFT<span class="token punctuation">:</span></span>
<span class="highlight-line">                <span class="token function">moveLeft</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="highlight-line">            <span class="token keyword">case</span> RIGHT<span class="token punctuation">:</span></span>
<span class="highlight-line">                <span class="token function">moveRight</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="highlight-line">        <span class="token punctuation">}</span></span>
<span class="highlight-line">    <span class="token punctuation">}</span></span>
<span class="highlight-line"></span>
<span class="highlight-line">    <span class="token keyword">function</span> <span class="token function">keyUp</span><span class="token punctuation">(</span>key<span class="token punctuation">:</span>Key<span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="highlight-line">        <span class="token function">trace</span><span class="token punctuation">(</span><span class="token string">'Key released: '</span> <span class="token operator">+</span> KeyCode<span class="token punctuation">.</span><span class="token function">name</span><span class="token punctuation">(</span>key<span class="token punctuation">.</span>keyCode<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="highlight-line">    <span class="token punctuation">}</span></span>
<span class="highlight-line"></span>
<span class="highlight-line"><span class="token punctuation">}</span></span></code></pre>
<h3 id="key-codes-vs-scan-codes" tabindex="-1">Key codes vs Scan codes <a class="header-anchor" href="#key-codes-vs-scan-codes"><span aria-hidden="true" class="header-anchor__symbol">#</span></a></h3>
<p>Ceramic supports both key codes and scan codes:</p>
<ul>
<li><strong>Key codes</strong> represent the logical key (affected by keyboard layout)</li>
<li><strong>Scan codes</strong> represent the physical key position (layout-independent)</li>
</ul>
<pre class="language-haxe"><code class="language-haxe"><span class="highlight-line"><span class="token comment">// Using scan codes for WASD movement (works on any keyboard layout)</span></span>
<span class="highlight-line"><span class="token keyword">if</span> <span class="token punctuation">(</span>input<span class="token punctuation">.</span><span class="token function">scanPressed</span><span class="token punctuation">(</span>KEY_W<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token function">moveUp</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="highlight-line"><span class="token keyword">if</span> <span class="token punctuation">(</span>input<span class="token punctuation">.</span><span class="token function">scanPressed</span><span class="token punctuation">(</span>KEY_A<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token function">moveLeft</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="highlight-line"><span class="token keyword">if</span> <span class="token punctuation">(</span>input<span class="token punctuation">.</span><span class="token function">scanPressed</span><span class="token punctuation">(</span>KEY_S<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token function">moveDown</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="highlight-line"><span class="token keyword">if</span> <span class="token punctuation">(</span>input<span class="token punctuation">.</span><span class="token function">scanPressed</span><span class="token punctuation">(</span>KEY_D<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token function">moveRight</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span></code></pre>
<h2 id="pointer-input-mouse-and-touch" tabindex="-1">Pointer input (mouse &amp; touch) <a class="header-anchor" href="#pointer-input-mouse-and-touch"><span aria-hidden="true" class="header-anchor__symbol">#</span></a></h2>
<p>Pointer input in Ceramic is unified for both mouse and touch, making it easy to support both input methods with the same code.</p>
<h3 id="visual-pointer-events" tabindex="-1">Visual pointer events <a class="header-anchor" href="#visual-pointer-events"><span aria-hidden="true" class="header-anchor__symbol">#</span></a></h3>
<p>Every <code>Visual</code> object can receive pointer events:</p>
<div class="codename">Handling pointer events on visuals</div>
<pre class="language-haxe"><code class="language-haxe"><span class="highlight-line"><span class="token keyword">import</span> ceramic<span class="token punctuation">.</span>TouchInfo<span class="token punctuation">;</span></span>
<span class="highlight-line"><span class="token keyword">import</span> ceramic<span class="token punctuation">.</span>Quad<span class="token punctuation">;</span></span>
<span class="highlight-line"><span class="token keyword">import</span> ceramic<span class="token punctuation">.</span>Scene<span class="token punctuation">;</span></span>
<span class="highlight-line"></span>
<span class="highlight-line"><span class="token keyword">class</span> PointerScene <span class="token keyword">extends</span> Scene <span class="token punctuation">{</span></span>
<span class="highlight-line"></span>
<span class="highlight-line">    <span class="token keyword">override</span> <span class="token keyword">function</span> <span class="token function">create</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="highlight-line"></span>
<span class="highlight-line">        <span class="token comment">// Create an interactive quad</span></span>
<span class="highlight-line">        <span class="token keyword">var</span> button <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token function">Quad</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="highlight-line">        button<span class="token punctuation">.</span><span class="token function">size</span><span class="token punctuation">(</span><span class="token number">100</span><span class="token punctuation">,</span> <span class="token number">50</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="highlight-line">        button<span class="token punctuation">.</span><span class="token function">pos</span><span class="token punctuation">(</span><span class="token number">50</span><span class="token punctuation">,</span> <span class="token number">50</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="highlight-line">        button<span class="token punctuation">.</span>color <span class="token operator">=</span> Color<span class="token punctuation">.</span>BLUE<span class="token punctuation">;</span></span>
<span class="highlight-line">        <span class="token function">add</span><span class="token punctuation">(</span>button<span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="highlight-line"></span>
<span class="highlight-line">        <span class="token comment">// React to pointer events</span></span>
<span class="highlight-line">        button<span class="token punctuation">.</span><span class="token function">onPointerDown</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">,</span> info <span class="token operator">-></span> <span class="token punctuation">{</span></span>
<span class="highlight-line">            button<span class="token punctuation">.</span>color <span class="token operator">=</span> Color<span class="token punctuation">.</span>RED<span class="token punctuation">;</span></span>
<span class="highlight-line">            <span class="token function">trace</span><span class="token punctuation">(</span><span class="token string">'Pointer down at: <span class="token interpolation"><span class="token interpolation variable">$</span><span class="token punctuation">{</span>info<span class="token punctuation">.</span>x<span class="token punctuation">}</span></span>, <span class="token interpolation"><span class="token interpolation variable">$</span><span class="token punctuation">{</span>info<span class="token punctuation">.</span>y<span class="token punctuation">}</span></span>'</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="highlight-line">        <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="highlight-line"></span>
<span class="highlight-line">        button<span class="token punctuation">.</span><span class="token function">onPointerUp</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">,</span> info <span class="token operator">-></span> <span class="token punctuation">{</span></span>
<span class="highlight-line">            button<span class="token punctuation">.</span>color <span class="token operator">=</span> Color<span class="token punctuation">.</span>BLUE<span class="token punctuation">;</span></span>
<span class="highlight-line">            <span class="token function">trace</span><span class="token punctuation">(</span><span class="token string">'Pointer up'</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="highlight-line">        <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="highlight-line"></span>
<span class="highlight-line">        button<span class="token punctuation">.</span><span class="token function">onPointerOver</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">,</span> info <span class="token operator">-></span> <span class="token punctuation">{</span></span>
<span class="highlight-line">            button<span class="token punctuation">.</span>alpha <span class="token operator">=</span> <span class="token number">0.8</span><span class="token punctuation">;</span></span>
<span class="highlight-line">        <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="highlight-line"></span>
<span class="highlight-line">        button<span class="token punctuation">.</span><span class="token function">onPointerOut</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">,</span> info <span class="token operator">-></span> <span class="token punctuation">{</span></span>
<span class="highlight-line">            button<span class="token punctuation">.</span>alpha <span class="token operator">=</span> <span class="token number">1.0</span><span class="token punctuation">;</span></span>
<span class="highlight-line">        <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="highlight-line"></span>
<span class="highlight-line">    <span class="token punctuation">}</span></span>
<span class="highlight-line"></span>
<span class="highlight-line"><span class="token punctuation">}</span></span></code></pre>
<h3 id="screen-level-pointer-tracking" tabindex="-1">Screen-level pointer tracking <a class="header-anchor" href="#screen-level-pointer-tracking"><span aria-hidden="true" class="header-anchor__symbol">#</span></a></h3>
<p>For global pointer tracking, use the <code>screen</code> object:</p>
<div class="codename">Tracking pointer position</div>
<pre class="language-haxe"><code class="language-haxe"><span class="highlight-line"><span class="token comment">// Get current pointer position</span></span>
<span class="highlight-line"><span class="token keyword">var</span> x <span class="token operator">=</span> screen<span class="token punctuation">.</span>pointerX<span class="token punctuation">;</span></span>
<span class="highlight-line"><span class="token keyword">var</span> y <span class="token operator">=</span> screen<span class="token punctuation">.</span>pointerY<span class="token punctuation">;</span></span>
<span class="highlight-line"></span>
<span class="highlight-line"><span class="token comment">// Listen to pointer movement anywhere on screen</span></span>
<span class="highlight-line">screen<span class="token punctuation">.</span><span class="token function">onPointerMove</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">,</span> info <span class="token operator">-></span> <span class="token punctuation">{</span></span>
<span class="highlight-line">    <span class="token function">trace</span><span class="token punctuation">(</span><span class="token string">'Pointer moved to: <span class="token interpolation"><span class="token interpolation variable">$</span><span class="token punctuation">{</span>info<span class="token punctuation">.</span>x<span class="token punctuation">}</span></span>, <span class="token interpolation"><span class="token interpolation variable">$</span><span class="token punctuation">{</span>info<span class="token punctuation">.</span>y<span class="token punctuation">}</span></span>'</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="highlight-line"><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span></code></pre>
<h3 id="dragging-example" tabindex="-1">Dragging example <a class="header-anchor" href="#dragging-example"><span aria-hidden="true" class="header-anchor__symbol">#</span></a></h3>
<p>Here's how to implement dragging behavior:</p>
<div class="codename">Implementing drag behavior</div>
<pre class="language-haxe"><code class="language-haxe"><span class="highlight-line"><span class="token keyword">import</span> ceramic<span class="token punctuation">.</span>TouchInfo<span class="token punctuation">;</span></span>
<span class="highlight-line"><span class="token keyword">import</span> ceramic<span class="token punctuation">.</span>Quad<span class="token punctuation">;</span></span>
<span class="highlight-line"><span class="token keyword">import</span> ceramic<span class="token punctuation">.</span>Scene<span class="token punctuation">;</span></span>
<span class="highlight-line"></span>
<span class="highlight-line"><span class="token keyword">class</span> DragScene <span class="token keyword">extends</span> Scene <span class="token punctuation">{</span></span>
<span class="highlight-line"></span>
<span class="highlight-line">    <span class="token keyword">var</span> draggedQuad<span class="token punctuation">:</span>Quad<span class="token punctuation">;</span></span>
<span class="highlight-line">    <span class="token keyword">var</span> dragOffsetX<span class="token punctuation">:</span>Float<span class="token punctuation">;</span></span>
<span class="highlight-line">    <span class="token keyword">var</span> dragOffsetY<span class="token punctuation">:</span>Float<span class="token punctuation">;</span></span>
<span class="highlight-line"></span>
<span class="highlight-line">    <span class="token keyword">override</span> <span class="token keyword">function</span> <span class="token function">create</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="highlight-line"></span>
<span class="highlight-line">        <span class="token keyword">var</span> quad <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token function">Quad</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="highlight-line">        quad<span class="token punctuation">.</span><span class="token function">size</span><span class="token punctuation">(</span><span class="token number">64</span><span class="token punctuation">,</span> <span class="token number">64</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="highlight-line">        quad<span class="token punctuation">.</span><span class="token function">pos</span><span class="token punctuation">(</span><span class="token number">100</span><span class="token punctuation">,</span> <span class="token number">100</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="highlight-line">        quad<span class="token punctuation">.</span><span class="token function">anchor</span><span class="token punctuation">(</span><span class="token number">0.5</span><span class="token punctuation">,</span> <span class="token number">0.5</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="highlight-line">        <span class="token function">add</span><span class="token punctuation">(</span>quad<span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="highlight-line"></span>
<span class="highlight-line">        <span class="token comment">// Start dragging</span></span>
<span class="highlight-line">        quad<span class="token punctuation">.</span><span class="token function">onPointerDown</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">,</span> startDrag<span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="highlight-line"></span>
<span class="highlight-line">    <span class="token punctuation">}</span></span>
<span class="highlight-line"></span>
<span class="highlight-line">    <span class="token keyword">function</span> <span class="token function">startDrag</span><span class="token punctuation">(</span>info<span class="token punctuation">:</span>TouchInfo<span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="highlight-line"></span>
<span class="highlight-line">        draggedQuad <span class="token operator">=</span> <span class="token keyword">cast</span> info<span class="token punctuation">.</span>visual<span class="token punctuation">;</span></span>
<span class="highlight-line">        dragOffsetX <span class="token operator">=</span> draggedQuad<span class="token punctuation">.</span>x <span class="token operator">-</span> info<span class="token punctuation">.</span>x<span class="token punctuation">;</span></span>
<span class="highlight-line">        dragOffsetY <span class="token operator">=</span> draggedQuad<span class="token punctuation">.</span>y <span class="token operator">-</span> info<span class="token punctuation">.</span>y<span class="token punctuation">;</span></span>
<span class="highlight-line"></span>
<span class="highlight-line">        <span class="token comment">// Follow pointer movement</span></span>
<span class="highlight-line">        screen<span class="token punctuation">.</span><span class="token function">onPointerMove</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">,</span> updateDrag<span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="highlight-line"></span>
<span class="highlight-line">        <span class="token comment">// Stop dragging on release</span></span>
<span class="highlight-line">        screen<span class="token punctuation">.</span><span class="token function">oncePointerUp</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">,</span> stopDrag<span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="highlight-line"></span>
<span class="highlight-line">    <span class="token punctuation">}</span></span>
<span class="highlight-line"></span>
<span class="highlight-line">    <span class="token keyword">function</span> <span class="token function">updateDrag</span><span class="token punctuation">(</span>info<span class="token punctuation">:</span>TouchInfo<span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="highlight-line">        draggedQuad<span class="token punctuation">.</span>x <span class="token operator">=</span> info<span class="token punctuation">.</span>x <span class="token operator">+</span> dragOffsetX<span class="token punctuation">;</span></span>
<span class="highlight-line">        draggedQuad<span class="token punctuation">.</span>y <span class="token operator">=</span> info<span class="token punctuation">.</span>y <span class="token operator">+</span> dragOffsetY<span class="token punctuation">;</span></span>
<span class="highlight-line">    <span class="token punctuation">}</span></span>
<span class="highlight-line"></span>
<span class="highlight-line">    <span class="token keyword">function</span> <span class="token function">stopDrag</span><span class="token punctuation">(</span>info<span class="token punctuation">:</span>TouchInfo<span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="highlight-line">        screen<span class="token punctuation">.</span><span class="token function">offPointerMove</span><span class="token punctuation">(</span>updateDrag<span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="highlight-line">        draggedQuad <span class="token operator">=</span> <span class="token keyword">null</span><span class="token punctuation">;</span></span>
<span class="highlight-line">    <span class="token punctuation">}</span></span>
<span class="highlight-line"></span>
<span class="highlight-line"><span class="token punctuation">}</span></span></code></pre>
<h3 id="multi-touch-support" tabindex="-1">Multi-touch support <a class="header-anchor" href="#multi-touch-support"><span aria-hidden="true" class="header-anchor__symbol">#</span></a></h3>
<p>Ceramic supports multi-touch input through dedicated events:</p>
<pre class="language-haxe"><code class="language-haxe"><span class="highlight-line"><span class="token comment">// Listen to multi-touch events</span></span>
<span class="highlight-line">screen<span class="token punctuation">.</span><span class="token function">onMultiTouchPointerDown</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">,</span> info <span class="token operator">-></span> <span class="token punctuation">{</span></span>
<span class="highlight-line">    <span class="token function">trace</span><span class="token punctuation">(</span><span class="token string">'Touch <span class="token interpolation"><span class="token interpolation variable">$</span><span class="token punctuation">{</span>info<span class="token punctuation">.</span>index<span class="token punctuation">}</span></span> started at: <span class="token interpolation"><span class="token interpolation variable">$</span><span class="token punctuation">{</span>info<span class="token punctuation">.</span>x<span class="token punctuation">}</span></span>, <span class="token interpolation"><span class="token interpolation variable">$</span><span class="token punctuation">{</span>info<span class="token punctuation">.</span>y<span class="token punctuation">}</span></span>'</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="highlight-line"><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="highlight-line"></span>
<span class="highlight-line">screen<span class="token punctuation">.</span><span class="token function">onMultiTouchPointerMove</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">,</span> info <span class="token operator">-></span> <span class="token punctuation">{</span></span>
<span class="highlight-line">    <span class="token function">trace</span><span class="token punctuation">(</span><span class="token string">'Touch <span class="token interpolation"><span class="token interpolation variable">$</span><span class="token punctuation">{</span>info<span class="token punctuation">.</span>index<span class="token punctuation">}</span></span> moved to: <span class="token interpolation"><span class="token interpolation variable">$</span><span class="token punctuation">{</span>info<span class="token punctuation">.</span>x<span class="token punctuation">}</span></span>, <span class="token interpolation"><span class="token interpolation variable">$</span><span class="token punctuation">{</span>info<span class="token punctuation">.</span>y<span class="token punctuation">}</span></span>'</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="highlight-line"><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="highlight-line"></span>
<span class="highlight-line">screen<span class="token punctuation">.</span><span class="token function">onMultiTouchPointerUp</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">,</span> info <span class="token operator">-></span> <span class="token punctuation">{</span></span>
<span class="highlight-line">    <span class="token function">trace</span><span class="token punctuation">(</span><span class="token string">'Touch <span class="token interpolation"><span class="token interpolation variable">$</span><span class="token punctuation">{</span>info<span class="token punctuation">.</span>index<span class="token punctuation">}</span></span> ended'</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="highlight-line"><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span></code></pre>
<h4 id="visual-multitouch-property" tabindex="-1">Visual multiTouch property <a class="header-anchor" href="#visual-multitouch-property"><span aria-hidden="true" class="header-anchor__symbol">#</span></a></h4>
<p>By default, a visual can only handle one pointer interaction at a time. You can enable multi-touch on individual visuals:</p>
<pre class="language-haxe"><code class="language-haxe"><span class="highlight-line"><span class="token comment">// Enable multi-touch on a visual</span></span>
<span class="highlight-line"><span class="token keyword">var</span> interactive <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token function">Visual</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="highlight-line">interactive<span class="token punctuation">.</span>multiTouch <span class="token operator">=</span> <span class="token boolean">true</span><span class="token punctuation">;</span></span>
<span class="highlight-line">interactive<span class="token punctuation">.</span><span class="token function">size</span><span class="token punctuation">(</span><span class="token number">200</span><span class="token punctuation">,</span> <span class="token number">200</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="highlight-line"><span class="token function">add</span><span class="token punctuation">(</span>interactive<span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="highlight-line"></span>
<span class="highlight-line"><span class="token comment">// Now this visual can receive multiple simultaneous pointer events</span></span>
<span class="highlight-line">interactive<span class="token punctuation">.</span><span class="token function">onPointerDown</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">,</span> info <span class="token operator">-></span> <span class="token punctuation">{</span></span>
<span class="highlight-line">    <span class="token function">trace</span><span class="token punctuation">(</span><span class="token string">'Pointer <span class="token interpolation"><span class="token interpolation variable">$</span><span class="token punctuation">{</span>info<span class="token punctuation">.</span>index<span class="token punctuation">}</span></span> down at: <span class="token interpolation"><span class="token interpolation variable">$</span><span class="token punctuation">{</span>info<span class="token punctuation">.</span>x<span class="token punctuation">}</span></span>, <span class="token interpolation"><span class="token interpolation variable">$</span><span class="token punctuation">{</span>info<span class="token punctuation">.</span>y<span class="token punctuation">}</span></span>'</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="highlight-line"><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span></code></pre>
<p>When <code>multiTouch</code> is <code>false</code> (default):</p>
<ul>
<li>The visual triggers <code>pointerDown</code> when the first finger touches it</li>
<li>It triggers <code>pointerUp</code> only when the last finger is released</li>
<li>This ensures clean single-pointer interaction behavior</li>
</ul>
<p>When <code>multiTouch</code> is <code>true</code>:</p>
<ul>
<li>The visual receives separate events for each finger/pointer</li>
<li>Multiple <code>pointerDown</code>/<code>pointerUp</code> events can overlap</li>
<li>Useful for gestures like pinch-to-zoom or multi-finger controls</li>
</ul>
<h2 id="gamepad-input" tabindex="-1">Gamepad input <a class="header-anchor" href="#gamepad-input"><span aria-hidden="true" class="header-anchor__symbol">#</span></a></h2>
<p>Ceramic supports multiple gamepads with button and analog input.</p>
<h3 id="checking-gamepad-buttons" tabindex="-1">Checking gamepad buttons <a class="header-anchor" href="#checking-gamepad-buttons"><span aria-hidden="true" class="header-anchor__symbol">#</span></a></h3>
<p>Similar to keyboard input, gamepads have three button states:</p>
<div class="codename">Gamepad button handling</div>
<pre class="language-haxe"><code class="language-haxe"><span class="highlight-line"><span class="token comment">// Check if a button is pressed on gamepad 0</span></span>
<span class="highlight-line"><span class="token keyword">if</span> <span class="token punctuation">(</span>input<span class="token punctuation">.</span><span class="token function">gamepadPressed</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">,</span> A<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="highlight-line">    player<span class="token punctuation">.</span><span class="token function">jump</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="highlight-line"><span class="token punctuation">}</span></span>
<span class="highlight-line"></span>
<span class="highlight-line"><span class="token comment">// Check if a button was just pressed</span></span>
<span class="highlight-line"><span class="token keyword">if</span> <span class="token punctuation">(</span>input<span class="token punctuation">.</span><span class="token function">gamepadJustPressed</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">,</span> START<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="highlight-line">    <span class="token function">pauseGame</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="highlight-line"><span class="token punctuation">}</span></span>
<span class="highlight-line"></span>
<span class="highlight-line"><span class="token comment">// Listen to gamepad button events</span></span>
<span class="highlight-line">input<span class="token punctuation">.</span><span class="token function">onGamepadDown</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">,</span> <span class="token punctuation">(</span>gamepadId<span class="token punctuation">,</span> button<span class="token punctuation">)</span> <span class="token operator">-></span> <span class="token punctuation">{</span></span>
<span class="highlight-line">    <span class="token function">trace</span><span class="token punctuation">(</span><span class="token string">'Gamepad <span class="token interpolation"><span class="token interpolation variable">$gamepadId</span></span> pressed <span class="token interpolation"><span class="token interpolation variable">$button</span></span>'</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="highlight-line"><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span></code></pre>
<h3 id="reading-analog-sticks-and-triggers" tabindex="-1">Reading analog sticks and triggers <a class="header-anchor" href="#reading-analog-sticks-and-triggers"><span aria-hidden="true" class="header-anchor__symbol">#</span></a></h3>
<p>Gamepads have analog inputs for sticks and triggers:</p>
<div class="codename">Reading gamepad analog values</div>
<pre class="language-haxe"><code class="language-haxe"><span class="highlight-line"><span class="token comment">// Read left stick (returns -1 to 1)</span></span>
<span class="highlight-line"><span class="token keyword">var</span> leftX <span class="token operator">=</span> input<span class="token punctuation">.</span><span class="token function">gamepadAxisValue</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">,</span> LEFT_X<span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="highlight-line"><span class="token keyword">var</span> leftY <span class="token operator">=</span> input<span class="token punctuation">.</span><span class="token function">gamepadAxisValue</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">,</span> LEFT_Y<span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="highlight-line"></span>
<span class="highlight-line"><span class="token comment">// Read right stick</span></span>
<span class="highlight-line"><span class="token keyword">var</span> rightX <span class="token operator">=</span> input<span class="token punctuation">.</span><span class="token function">gamepadAxisValue</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">,</span> RIGHT_X<span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="highlight-line"><span class="token keyword">var</span> rightY <span class="token operator">=</span> input<span class="token punctuation">.</span><span class="token function">gamepadAxisValue</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">,</span> RIGHT_Y<span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="highlight-line"></span>
<span class="highlight-line"><span class="token comment">// Read triggers (returns 0 to 1)</span></span>
<span class="highlight-line"><span class="token keyword">var</span> leftTrigger <span class="token operator">=</span> input<span class="token punctuation">.</span><span class="token function">gamepadAxisValue</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">,</span> LEFT_TRIGGER<span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="highlight-line"><span class="token keyword">var</span> rightTrigger <span class="token operator">=</span> input<span class="token punctuation">.</span><span class="token function">gamepadAxisValue</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">,</span> RIGHT_TRIGGER<span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="highlight-line"></span>
<span class="highlight-line"><span class="token comment">// Apply dead zone</span></span>
<span class="highlight-line"><span class="token keyword">if</span> <span class="token punctuation">(</span>Math<span class="token punctuation">.</span><span class="token function">abs</span><span class="token punctuation">(</span>leftX<span class="token punctuation">)</span> <span class="token operator">></span> <span class="token number">0.2</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="highlight-line">    player<span class="token punctuation">.</span><span class="token function">moveX</span><span class="token punctuation">(</span>leftX<span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="highlight-line"><span class="token punctuation">}</span></span></code></pre>
<h3 id="managing-multiple-gamepads" tabindex="-1">Managing multiple gamepads <a class="header-anchor" href="#managing-multiple-gamepads"><span aria-hidden="true" class="header-anchor__symbol">#</span></a></h3>
<p>Ceramic automatically detects connected gamepads:</p>
<div class="codename">Working with multiple gamepads</div>
<pre class="language-haxe"><code class="language-haxe"><span class="highlight-line"><span class="token comment">// Get list of active gamepad IDs</span></span>
<span class="highlight-line"><span class="token keyword">var</span> gamepads <span class="token operator">=</span> input<span class="token punctuation">.</span>activeGamepads<span class="token punctuation">;</span></span>
<span class="highlight-line"></span>
<span class="highlight-line"><span class="token comment">// Listen for gamepad connections</span></span>
<span class="highlight-line">input<span class="token punctuation">.</span><span class="token function">onGamepadEnable</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">,</span> <span class="token punctuation">(</span>gamepadId<span class="token punctuation">,</span> name<span class="token punctuation">)</span> <span class="token operator">-></span> <span class="token punctuation">{</span></span>
<span class="highlight-line">    <span class="token function">trace</span><span class="token punctuation">(</span><span class="token string">'Gamepad <span class="token interpolation"><span class="token interpolation variable">$gamepadId</span></span> connected: <span class="token interpolation"><span class="token interpolation variable">$name</span></span>'</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="highlight-line"><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="highlight-line"></span>
<span class="highlight-line">input<span class="token punctuation">.</span><span class="token function">onGamepadDisable</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">,</span> gamepadId <span class="token operator">-></span> <span class="token punctuation">{</span></span>
<span class="highlight-line">    <span class="token function">trace</span><span class="token punctuation">(</span><span class="token string">'Gamepad <span class="token interpolation"><span class="token interpolation variable">$gamepadId</span></span> disconnected'</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="highlight-line"><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="highlight-line"></span>
<span class="highlight-line"><span class="token comment">// Handle input from all gamepads</span></span>
<span class="highlight-line"><span class="token keyword">for</span> <span class="token punctuation">(</span>gamepadId <span class="token keyword">in</span> gamepads<span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="highlight-line">    <span class="token keyword">if</span> <span class="token punctuation">(</span>input<span class="token punctuation">.</span><span class="token function">gamepadPressed</span><span class="token punctuation">(</span>gamepadId<span class="token punctuation">,</span> A<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="highlight-line">        <span class="token function">playerJump</span><span class="token punctuation">(</span>gamepadId<span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="highlight-line">    <span class="token punctuation">}</span></span>
<span class="highlight-line"><span class="token punctuation">}</span></span></code></pre>
<h3 id="gamepad-rumble" tabindex="-1">Gamepad rumble <a class="header-anchor" href="#gamepad-rumble"><span aria-hidden="true" class="header-anchor__symbol">#</span></a></h3>
<p>You can trigger controller vibration:</p>
<pre class="language-haxe"><code class="language-haxe"><span class="highlight-line"><span class="token comment">// Start rumble (duration in seconds, low and high frequency 0-1)</span></span>
<span class="highlight-line">input<span class="token punctuation">.</span><span class="token function">startGamepadRumble</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">0.5</span><span class="token punctuation">,</span> <span class="token number">0.3</span><span class="token punctuation">,</span> <span class="token number">0.7</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="highlight-line"></span>
<span class="highlight-line"><span class="token comment">// Stop rumble</span></span>
<span class="highlight-line">input<span class="token punctuation">.</span><span class="token function">stopGamepadRumble</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span></code></pre>
<h2 id="input-in-update-loops" tabindex="-1">Input in update loops <a class="header-anchor" href="#input-in-update-loops"><span aria-hidden="true" class="header-anchor__symbol">#</span></a></h2>
<p>When handling input in your update loop, use the <strong>just pressed</strong> and <strong>just released</strong> states to avoid repeated actions:</p>
<div class="codename">Input in update loops</div>
<pre class="language-haxe"><code class="language-haxe"><span class="highlight-line"><span class="token keyword">class</span> GameScene <span class="token keyword">extends</span> Scene <span class="token punctuation">{</span></span>
<span class="highlight-line"></span>
<span class="highlight-line">    <span class="token keyword">var</span> player<span class="token punctuation">:</span>Player<span class="token punctuation">;</span></span>
<span class="highlight-line"></span>
<span class="highlight-line">    <span class="token keyword">override</span> <span class="token keyword">function</span> <span class="token function">update</span><span class="token punctuation">(</span>delta<span class="token punctuation">:</span>Float<span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="highlight-line"></span>
<span class="highlight-line">        <span class="token comment">// Continuous movement while held</span></span>
<span class="highlight-line">        <span class="token keyword">if</span> <span class="token punctuation">(</span>input<span class="token punctuation">.</span><span class="token function">keyPressed</span><span class="token punctuation">(</span>LEFT<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="highlight-line">            player<span class="token punctuation">.</span>x <span class="token operator">-</span><span class="token operator">=</span> <span class="token number">200</span> <span class="token operator">*</span> delta<span class="token punctuation">;</span></span>
<span class="highlight-line">        <span class="token punctuation">}</span></span>
<span class="highlight-line">        <span class="token keyword">if</span> <span class="token punctuation">(</span>input<span class="token punctuation">.</span><span class="token function">keyPressed</span><span class="token punctuation">(</span>RIGHT<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="highlight-line">            player<span class="token punctuation">.</span>x <span class="token operator">+</span><span class="token operator">=</span> <span class="token number">200</span> <span class="token operator">*</span> delta<span class="token punctuation">;</span></span>
<span class="highlight-line">        <span class="token punctuation">}</span></span>
<span class="highlight-line"></span>
<span class="highlight-line">        <span class="token comment">// Single action on press</span></span>
<span class="highlight-line">        <span class="token keyword">if</span> <span class="token punctuation">(</span>input<span class="token punctuation">.</span><span class="token function">keyJustPressed</span><span class="token punctuation">(</span>SPACE<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="highlight-line">            player<span class="token punctuation">.</span><span class="token function">jump</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="highlight-line">        <span class="token punctuation">}</span></span>
<span class="highlight-line"></span>
<span class="highlight-line">        <span class="token comment">// Gamepad analog movement</span></span>
<span class="highlight-line">        <span class="token keyword">var</span> moveX <span class="token operator">=</span> input<span class="token punctuation">.</span><span class="token function">gamepadAxisValue</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">,</span> LEFT_X<span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="highlight-line">        <span class="token keyword">if</span> <span class="token punctuation">(</span>Math<span class="token punctuation">.</span><span class="token function">abs</span><span class="token punctuation">(</span>moveX<span class="token punctuation">)</span> <span class="token operator">></span> <span class="token number">0.2</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="highlight-line">            player<span class="token punctuation">.</span>x <span class="token operator">+</span><span class="token operator">=</span> moveX <span class="token operator">*</span> <span class="token number">200</span> <span class="token operator">*</span> delta<span class="token punctuation">;</span></span>
<span class="highlight-line">        <span class="token punctuation">}</span></span>
<span class="highlight-line"></span>
<span class="highlight-line">    <span class="token punctuation">}</span></span>
<span class="highlight-line"></span>
<span class="highlight-line"><span class="token punctuation">}</span></span></code></pre>
<h2 id="inputmap-unified-input-handling" tabindex="-1">InputMap: Unified input handling <a class="header-anchor" href="#inputmap-unified-input-handling"><span aria-hidden="true" class="header-anchor__symbol">#</span></a></h2>
<p>The <code>InputMap</code> utility allows you to create custom input actions that work across keyboard, gamepad, and other input methods. This is especially useful for games where you want to support multiple control schemes.</p>
<div class="codename">Creating an InputMap for player controls</div>
<pre class="language-haxe"><code class="language-haxe"><span class="highlight-line"><span class="token keyword">import</span> ceramic<span class="token punctuation">.</span>InputMap<span class="token punctuation">;</span></span>
<span class="highlight-line"></span>
<span class="highlight-line"><span class="token comment">// Define your input actions as an enum</span></span>
<span class="highlight-line"><span class="token keyword">enum</span> <span class="token keyword">abstract</span> <span class="token function">PlayerInput</span><span class="token punctuation">(</span>Int<span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="highlight-line">    <span class="token keyword">var</span> LEFT<span class="token punctuation">;</span></span>
<span class="highlight-line">    <span class="token keyword">var</span> RIGHT<span class="token punctuation">;</span></span>
<span class="highlight-line">    <span class="token keyword">var</span> JUMP<span class="token punctuation">;</span></span>
<span class="highlight-line">    <span class="token keyword">var</span> SHOOT<span class="token punctuation">;</span></span>
<span class="highlight-line"><span class="token punctuation">}</span></span>
<span class="highlight-line"></span>
<span class="highlight-line"><span class="token keyword">class</span> Player <span class="token keyword">extends</span> Visual <span class="token punctuation">{</span></span>
<span class="highlight-line"></span>
<span class="highlight-line">    <span class="token keyword">var</span> inputMap <span class="token operator">=</span> <span class="token keyword">new</span> InputMap<span class="token operator">&lt;</span>PlayerInput<span class="token operator">></span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="highlight-line"></span>
<span class="highlight-line">    <span class="token keyword">override</span> <span class="token keyword">function</span> <span class="token function">create</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="highlight-line"></span>
<span class="highlight-line">        <span class="token comment">// Bind keyboard keys</span></span>
<span class="highlight-line">        inputMap<span class="token punctuation">.</span><span class="token function">bindKeyCode</span><span class="token punctuation">(</span>LEFT<span class="token punctuation">,</span> LEFT<span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="highlight-line">        inputMap<span class="token punctuation">.</span><span class="token function">bindKeyCode</span><span class="token punctuation">(</span>RIGHT<span class="token punctuation">,</span> RIGHT<span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="highlight-line">        inputMap<span class="token punctuation">.</span><span class="token function">bindKeyCode</span><span class="token punctuation">(</span>JUMP<span class="token punctuation">,</span> SPACE<span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="highlight-line">        inputMap<span class="token punctuation">.</span><span class="token function">bindKeyCode</span><span class="token punctuation">(</span>SHOOT<span class="token punctuation">,</span> X<span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="highlight-line"></span>
<span class="highlight-line">        <span class="token comment">// Also bind WASD for movement</span></span>
<span class="highlight-line">        inputMap<span class="token punctuation">.</span><span class="token function">bindScanCode</span><span class="token punctuation">(</span>LEFT<span class="token punctuation">,</span> KEY_A<span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="highlight-line">        inputMap<span class="token punctuation">.</span><span class="token function">bindScanCode</span><span class="token punctuation">(</span>RIGHT<span class="token punctuation">,</span> KEY_D<span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="highlight-line">        inputMap<span class="token punctuation">.</span><span class="token function">bindScanCode</span><span class="token punctuation">(</span>JUMP<span class="token punctuation">,</span> KEY_W<span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="highlight-line">        inputMap<span class="token punctuation">.</span><span class="token function">bindScanCode</span><span class="token punctuation">(</span>SHOOT<span class="token punctuation">,</span> KEY_J<span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="highlight-line"></span>
<span class="highlight-line">        <span class="token comment">// Bind gamepad buttons</span></span>
<span class="highlight-line">        inputMap<span class="token punctuation">.</span><span class="token function">bindGamepadButton</span><span class="token punctuation">(</span>JUMP<span class="token punctuation">,</span> A<span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="highlight-line">        inputMap<span class="token punctuation">.</span><span class="token function">bindGamepadButton</span><span class="token punctuation">(</span>SHOOT<span class="token punctuation">,</span> X<span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="highlight-line">        inputMap<span class="token punctuation">.</span><span class="token function">bindGamepadButton</span><span class="token punctuation">(</span>LEFT<span class="token punctuation">,</span> DPAD_LEFT<span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="highlight-line">        inputMap<span class="token punctuation">.</span><span class="token function">bindGamepadButton</span><span class="token punctuation">(</span>RIGHT<span class="token punctuation">,</span> DPAD_RIGHT<span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="highlight-line"></span>
<span class="highlight-line">        <span class="token comment">// Bind analog stick to digital actions</span></span>
<span class="highlight-line">        inputMap<span class="token punctuation">.</span><span class="token function">bindGamepadAxisToButton</span><span class="token punctuation">(</span>LEFT<span class="token punctuation">,</span> LEFT_X<span class="token punctuation">,</span> <span class="token operator">-</span><span class="token number">0.25</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="highlight-line">        inputMap<span class="token punctuation">.</span><span class="token function">bindGamepadAxisToButton</span><span class="token punctuation">(</span>RIGHT<span class="token punctuation">,</span> LEFT_X<span class="token punctuation">,</span> <span class="token number">0.25</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="highlight-line"></span>
<span class="highlight-line">        <span class="token comment">// Listen for input events</span></span>
<span class="highlight-line">        inputMap<span class="token punctuation">.</span><span class="token function">onKeyDown</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">,</span> key <span class="token operator">-></span> <span class="token punctuation">{</span></span>
<span class="highlight-line">            <span class="token function">trace</span><span class="token punctuation">(</span><span class="token string">'Action pressed: <span class="token interpolation"><span class="token interpolation variable">$key</span></span>'</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="highlight-line">        <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="highlight-line"></span>
<span class="highlight-line">    <span class="token punctuation">}</span></span>
<span class="highlight-line"></span>
<span class="highlight-line">    <span class="token keyword">override</span> <span class="token keyword">function</span> <span class="token function">update</span><span class="token punctuation">(</span>delta<span class="token punctuation">:</span>Float<span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="highlight-line"></span>
<span class="highlight-line">        <span class="token comment">// Check input states</span></span>
<span class="highlight-line">        <span class="token keyword">if</span> <span class="token punctuation">(</span>inputMap<span class="token punctuation">.</span><span class="token function">pressed</span><span class="token punctuation">(</span>LEFT<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="highlight-line">            x <span class="token operator">-</span><span class="token operator">=</span> <span class="token number">200</span> <span class="token operator">*</span> delta<span class="token punctuation">;</span></span>
<span class="highlight-line">        <span class="token punctuation">}</span></span>
<span class="highlight-line">        <span class="token keyword">if</span> <span class="token punctuation">(</span>inputMap<span class="token punctuation">.</span><span class="token function">pressed</span><span class="token punctuation">(</span>RIGHT<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="highlight-line">            x <span class="token operator">+</span><span class="token operator">=</span> <span class="token number">200</span> <span class="token operator">*</span> delta<span class="token punctuation">;</span></span>
<span class="highlight-line">        <span class="token punctuation">}</span></span>
<span class="highlight-line">        <span class="token keyword">if</span> <span class="token punctuation">(</span>inputMap<span class="token punctuation">.</span><span class="token function">justPressed</span><span class="token punctuation">(</span>JUMP<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="highlight-line">            <span class="token function">jump</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="highlight-line">        <span class="token punctuation">}</span></span>
<span class="highlight-line"></span>
<span class="highlight-line">    <span class="token punctuation">}</span></span>
<span class="highlight-line"></span>
<span class="highlight-line"><span class="token punctuation">}</span></span></code></pre>
<h3 id="inputmap-features" tabindex="-1">InputMap features <a class="header-anchor" href="#inputmap-features"><span aria-hidden="true" class="header-anchor__symbol">#</span></a></h3>
<p>The <code>InputMap</code> provides several useful features:</p>
<ul>
<li><strong>Unified API</strong>: Use the same methods (<code>pressed()</code>, <code>justPressed()</code>, <code>justReleased()</code>) regardless of input source</li>
<li><strong>Multiple bindings</strong>: Bind multiple keys/buttons to the same action</li>
<li><strong>Analog-to-digital</strong>: Convert analog stick movements to button presses with thresholds</li>
<li><strong>Enable/disable</strong>: Temporarily disable input handling with <code>inputMap.enabled = false</code></li>
</ul>
<h2 id="wrapping-up" tabindex="-1">Wrapping up <a class="header-anchor" href="#wrapping-up"><span aria-hidden="true" class="header-anchor__symbol">#</span></a></h2>
<p>Ceramic's input system gives you flexibility to handle input in the way that best fits your project:</p>
<ul>
<li>
<p><strong>For UI and menus</strong>: Use pointer events on visuals (<code>onPointerDown</code>, <code>onPointerUp</code>) to create buttons and interactive elements that work with both mouse and touch.</p>
</li>
<li>
<p><strong>For real-time gameplay</strong>: Check input states in your update loop with methods like <code>input.keyPressed()</code> and <code>input.gamepadAxisValue()</code> for smooth, responsive controls.</p>
</li>
<li>
<p><strong>For complex control schemes</strong>: Create an <code>InputMap</code> to unify keyboard, gamepad, and other inputs into logical game actions, making it easy to support multiple control methods.</p>
</li>
<li>
<p><strong>For gesture-based interactions</strong>: Enable <code>multiTouch</code> on visuals when you need to track multiple fingers, like for pinch-to-zoom or multi-touch controls.</p>
</li>
</ul>
<p class="extra-info">The input system integrates with Ceramic's event system, so all the patterns you learned about <a href="/guides/events/">events</a> apply here. Remember to provide an owner when binding events to ensure proper cleanup!</p>
<p>Check out the <a href="/examples/keyboard-input/">keyboard input</a> and <a href="/examples/gamepad-input/">gamepad input</a> examples for more hands-on demonstrations!</p>

            
                
                            <hr />
                            <p>
                                Continue reading &#10132; <a href="/guides/inside-a-default-project/">Inside a default project</a> (Appendices)
                            </p>
                            
            
            
            <hr />
            <div id="like-counter"></div>
            <script src="https://utteranc.es/client.js"
                repo="ceramic-engine/ceramic-comments"
                issue-term="pathname"
                theme="github-dark"
                crossorigin="anonymous"
                async>
            </script>
            
        </main>
    </div>
</div>
    </body>
</html>